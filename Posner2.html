<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>posner2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Posner2_files/libs/clipboard/clipboard.min.js"></script>
<script src="Posner2_files/libs/quarto-html/quarto.js"></script>
<script src="Posner2_files/libs/quarto-html/popper.min.js"></script>
<script src="Posner2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Posner2_files/libs/quarto-html/anchor.min.js"></script>
<link href="Posner2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Posner2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Posner2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Posner2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Posner2_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ forcats   1.0.0     ✔ readr     2.1.4
✔ ggplot2   3.5.1     ✔ stringr   1.5.0
✔ lubridate 1.9.2     ✔ tibble    3.2.1
✔ purrr     1.0.2     ✔ tidyr     1.3.0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MatchIt)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(marginaleffects)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'marginaleffects' was built under R version 4.3.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dagitty)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'scales'

The following object is masked from 'package:purrr':

    discard

The following object is masked from 'package:readr':

    col_factor</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cobalt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code> cobalt (Version 4.5.5, Build Date: 2024-04-02)

Attaching package: 'cobalt'

The following object is masked from 'package:MatchIt':

    lalonde</code></pre>
</div>
</div>
<section id="for-loop-for-att-for-all-teams" class="level1">
<h1>For loop for ATT for all teams</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>team_files <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">ANA =</span> <span class="st">"Data/Team Datasets/ANA_games.csv"</span>,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">DET =</span> <span class="st">"Data/Team Datasets/DET_games.csv"</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">KCA =</span> <span class="st">"Data/Team Datasets/KCA_games.csv"</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">PHI =</span> <span class="st">"Data/Team Datasets/PHI_games.csv"</span>,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">WAS =</span> <span class="st">"Data/Team Datasets/WAS_games.csv"</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">BOS =</span> <span class="st">"Data/Team Datasets/BOS_games.csv"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">CIN =</span> <span class="st">"Data/Team Datasets/CIN_games.csv"</span>,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">SDN =</span> <span class="st">"Data/Team Datasets/SDN_games.csv"</span>,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">SFN =</span> <span class="st">"Data/Team Datasets/SFN_games.csv"</span>,</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">SLN =</span> <span class="st">"Data/Team Datasets/SLN_games.csv"</span>,</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">CLE =</span> <span class="st">"Data/Team Datasets/CLE_games.csv"</span>,</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">HOU =</span> <span class="st">"Data/Team Datasets/HOU_games.csv"</span>,</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">MIA =</span> <span class="st">"Data/Team Datasets/MIA_games.csv"</span>,</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">MIL =</span> <span class="st">"Data/Team Datasets/MIL_games.csv"</span>,</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">ARI =</span> <span class="st">"Data/Team Datasets/ARI_games.csv"</span>,</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">NYA =</span> <span class="st">"Data/Team Datasets/NYA_games.csv"</span>,</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">OAK =</span> <span class="st">"Data/Team Datasets/OAK_games.csv"</span>,</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">SEA =</span> <span class="st">"Data/Team Datasets/SEA_games.csv"</span>,</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">TBA =</span> <span class="st">"Data/Team Datasets/TBA_games.csv"</span>,</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">TEX =</span> <span class="st">"Data/Team Datasets/TEX_games.csv"</span>,</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">ATL =</span> <span class="st">"Data/Team Datasets/ATL_games.csv"</span>,</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">BAL =</span> <span class="st">"Data/Team Datasets/BAL_games.csv"</span>,</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">CHA =</span> <span class="st">"Data/Team Datasets/CHA_games.csv"</span>,</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">MIN =</span> <span class="st">"Data/Team Datasets/MIN_games.csv"</span>,</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">TOR =</span> <span class="st">"Data/Team Datasets/TOR_games.csv"</span>,</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">CHN =</span> <span class="st">"Data/Team Datasets/CHN_games.csv"</span>,</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">COL =</span> <span class="st">"Data/Team Datasets/COL_games.csv"</span>,</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">LAN =</span> <span class="st">"Data/Team Datasets/LAN_games.csv"</span>,</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">NYN =</span> <span class="st">"Data/Team Datasets/NYN_games.csv"</span>,</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">PIT =</span> <span class="st">"Data/Team Datasets/PIT_games.csv"</span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load required packages</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MatchIt)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(marginaleffects)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty list to store the results for each team</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>all_results <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over team abbreviations and their data files</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (abbr <span class="cf">in</span> <span class="fu">names</span>(team_files)) {</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read the data for the current team</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  team_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(team_files[[abbr]])</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove rows with missing values in covariates</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  team_data <span class="ot">&lt;-</span> team_data <span class="sc">%&gt;%</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Opp_Win_P_Cat),</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Opp_Playoffs),</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Opp_WS),</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Dow),</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Day_Night)</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Skip if the filtered dataset is too small</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(team_data) <span class="sc">&lt;</span> <span class="dv">10</span>) { <span class="co"># Adjust the threshold as needed</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Skipping team:"</span>, abbr, <span class="st">"- Not enough data after filtering</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">next</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Matching Method for ATT</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>  match_out_full <span class="ot">&lt;-</span> <span class="fu">matchit</span>(</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>    Home <span class="sc">~</span> Opp_Win_P_Cat <span class="sc">+</span> Opp_Playoffs <span class="sc">+</span> Opp_WS <span class="sc">+</span> Dow <span class="sc">+</span> Day_Night,</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> team_data,</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"full"</span>,</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">exact =</span> <span class="sc">~</span> Opp_Win_P_Cat <span class="sc">+</span> Opp_Playoffs <span class="sc">+</span> Opp_WS <span class="sc">+</span> Dow <span class="sc">+</span> Day_Night,</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">distance =</span> <span class="st">"glm"</span>,</span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimand =</span> <span class="st">"ATT"</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Print balance table (optional, for debugging/validation)</span></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Balance Table for"</span>, abbr, <span class="st">":</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">bal.tab</span>(match_out_full))</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Summary and plot (optional, for diagnostics)</span></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>  match_out_full_summ <span class="ot">&lt;-</span> <span class="fu">summary</span>(match_out_full, <span class="at">interactions =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(match_out_full_summ)  <span class="co"># Plot diagnostic information</span></span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract matched data</span></span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>  match_data_full <span class="ot">&lt;-</span> <span class="fu">match.data</span>(match_out_full)</span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Dynamically construct the dependent variable name</span></span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>  dependent_var <span class="ot">&lt;-</span> <span class="fu">paste0</span>(abbr, <span class="st">"_win"</span>)</span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Construct the formula dynamically</span></span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>  formula_str <span class="ot">&lt;-</span> <span class="fu">paste0</span>(dependent_var, <span class="st">" ~ Home * (Opp_Win_P_Cat + Opp_Playoffs + Opp_WS + Attendance + Dow + Day_Night)"</span>)</span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>  formula <span class="ot">&lt;-</span> <span class="fu">as.formula</span>(formula_str)</span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Regression model based on matched data</span></span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>  mod2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(formula, <span class="at">data =</span> match_data_full, <span class="at">weights =</span> weights)</span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Estimating ATT from the model</span></span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a>  att_results <span class="ot">&lt;-</span> <span class="fu">avg_comparisons</span>(</span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a>    mod2,</span>
<span id="cb15-65"><a href="#cb15-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">variables =</span> <span class="st">"Home"</span>,</span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">vcov =</span> <span class="sc">~</span>subclass,</span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">newdata =</span> <span class="fu">filter</span>(match_data_full, Home <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-70"><a href="#cb15-70" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add the team abbreviation to the results</span></span>
<span id="cb15-71"><a href="#cb15-71" aria-hidden="true" tabindex="-1"></a>  att_results <span class="ot">&lt;-</span> att_results <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Team =</span> abbr)</span>
<span id="cb15-72"><a href="#cb15-72" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-73"><a href="#cb15-73" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Store results in the list</span></span>
<span id="cb15-74"><a href="#cb15-74" aria-hidden="true" tabindex="-1"></a>  all_results[[abbr]] <span class="ot">&lt;-</span> att_results</span>
<span id="cb15-75"><a href="#cb15-75" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for ANA :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary       -0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary       -0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary       -0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2176.      2180
Matched (ESS)         585.34    2180
Matched (Unweighted) 2153.      2180
Unmatched              23.         0</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for DET :
Balance Measures
                           Type Diff.Adj
distance               Distance       -0
Opp_Win_P_Cat_Bad        Binary       -0
Opp_Win_P_Cat_Good       Binary       -0
Opp_Win_P_Cat_Great      Binary       -0
Opp_Win_P_Cat_Terrible   Binary       -0
Opp_Playoffs             Binary       -0
Opp_WS                   Binary       -0
Dow_Fri                  Binary        0
Dow_Mon                  Binary       -0
Dow_Sat                  Binary       -0
Dow_Sun                  Binary       -0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary       -0

Sample sizes
                     Control Treated
All                  2165.      2167
Matched (ESS)         766.71    2152
Matched (Unweighted) 2163.      2152
Unmatched               2.        15</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for KCA :
Balance Measures
                           Type Diff.Adj
distance               Distance       -0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary       -0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary       -0

Sample sizes
                     Control Treated
All                  2167.      2161
Matched (ESS)         810.99    2157
Matched (Unweighted) 2162.      2157
Unmatched               5.         4</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for PHI :
Balance Measures
                           Type Diff.Adj
distance               Distance       -0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2175.      2180
Matched (ESS)        1300.56    2179
Matched (Unweighted) 2163.      2179
Unmatched              12.         1</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for WAS :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  1377.      1375
Matched (ESS)         612.38    1357
Matched (Unweighted) 1364.      1357
Unmatched              13.        18</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for BOS :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary       -0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2164.      2165
Matched (ESS)        1151.45    2155
Matched (Unweighted) 2156.      2155
Unmatched               8.        10</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for CIN :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2179.      2180
Matched (ESS)         893.74    2173
Matched (Unweighted) 2162.      2173
Unmatched              17.         7</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for SDN :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary       -0
Opp_Win_P_Cat_Great      Binary       -0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary       -0
Dow_Sat                  Binary       -0
Dow_Sun                  Binary        0
Dow_Thu                  Binary       -0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2179.      2178
Matched (ESS)         603.84    2173
Matched (Unweighted) 2163.      2173
Unmatched              16.         5</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for SFN :
Balance Measures
                           Type Diff.Adj
distance               Distance       -0
Opp_Win_P_Cat_Bad        Binary       -0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2174.      2181
Matched (ESS)         455.39    2172
Matched (Unweighted) 2164.      2172
Unmatched              10.         9</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for SLN :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary       -0
Opp_WS                   Binary       -0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary       -0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary       -0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2176.      2178
Matched (ESS)         852.92    2170
Matched (Unweighted) 2148.      2170
Unmatched              28.         8</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for CLE :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary       -0
Dow_Mon                  Binary        0
Dow_Sat                  Binary       -0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2169.      2165
Matched (ESS)        1217.26    2155
Matched (Unweighted) 2158.      2155
Unmatched              11.        10</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for HOU :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary       -0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary       -0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary       -0

Sample sizes
                     Control Treated
All                  2178.      2178
Matched (ESS)        1019.76    2173
Matched (Unweighted) 2160.      2173
Unmatched              18.         5</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for MIA :
Balance Measures
                           Type Diff.Adj
distance               Distance       -0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary       -0

Sample sizes
                     Control Treated
All                  2184.      2167
Matched (ESS)        1025.49    2162
Matched (Unweighted) 2150.      2162
Unmatched              34.         5</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for MIL :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2167.      2169
Matched (ESS)        1015.73    2160
Matched (Unweighted) 2156.      2160
Unmatched              11.         9</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for ARI :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  1944.      1944
Matched (ESS)         697.08    1932
Matched (Unweighted) 1916.      1932
Unmatched              28.        12</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for NYA :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary       -0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2167.      2163
Matched (ESS)         423.16    2144
Matched (Unweighted) 2162.      2144
Unmatched               5.        19</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for OAK :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2164.      2164
Matched (ESS)         342.96    2159
Matched (Unweighted) 2155.      2159
Unmatched               9.         5</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for SEA :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2158.      2171
Matched (ESS)         912.41    2159
Matched (Unweighted) 2153.      2159
Unmatched               5.        12</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for TBA :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary       -0
Opp_Win_P_Cat_Terrible   Binary       -0
Opp_Playoffs             Binary        0
Opp_WS                   Binary       -0
Dow_Fri                  Binary       -0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary       -0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary       -0

Sample sizes
                     Control Treated
All                  1941.      1945
Matched (ESS)        1002.98    1942
Matched (Unweighted) 1912.      1942
Unmatched              29.         3</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for TEX :
Balance Measures
                           Type Diff.Adj
distance               Distance       -0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2165.      2167
Matched (ESS)         551.23    2157
Matched (Unweighted) 2150.      2157
Unmatched              15.        10</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for ATL :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary       -0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2176.      2178
Matched (ESS)         818.82    2168
Matched (Unweighted) 2153.      2168
Unmatched              23.        10</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for BAL :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary       -0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary       -0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary       -0
Dow_Mon                  Binary        0
Dow_Sat                  Binary       -0
Dow_Sun                  Binary        0
Dow_Thu                  Binary       -0
Dow_Tue                  Binary       -0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                   2170.     2162
Matched (ESS)         1369.6    2156
Matched (Unweighted)  2165.     2156
Unmatched                5.        6</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for CHA :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary       -0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2166.      2167
Matched (ESS)        1213.11    2156
Matched (Unweighted) 2162.      2156
Unmatched               4.        11</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for MIN :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary       -0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                   2164.     2167
Matched (ESS)         1117.1    2157
Matched (Unweighted)  2154.     2157
Unmatched               10.       10</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for TOR :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2170.      2164
Matched (ESS)         238.27    2160
Matched (Unweighted) 2147.      2160
Unmatched              23.         4</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for CHN :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary       -0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary       -0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2176.      2180
Matched (ESS)          89.49    2141
Matched (Unweighted) 2051.      2141
Unmatched             125.        39</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-26.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for COL :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary       -0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary       -0
Dow_Thu                  Binary       -0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary       -0

Sample sizes
                     Control Treated
All                  2179.      2179
Matched (ESS)        1106.97    2173
Matched (Unweighted) 2171.      2173
Unmatched               8.         6</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-27.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for LAN :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2177.      2179
Matched (ESS)         608.15    2171
Matched (Unweighted) 2145.      2171
Unmatched              32.         8</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-28.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for NYN :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary       -0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2178.      2177
Matched (ESS)        1002.54    2168
Matched (Unweighted) 2171.      2168
Unmatched               7.         9</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-29.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for PIT :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary       -0
Opp_Win_P_Cat_Good       Binary       -0
Opp_Win_P_Cat_Great      Binary       -0
Opp_Win_P_Cat_Terrible   Binary       -0
Opp_Playoffs             Binary       -0
Opp_WS                   Binary        0
Dow_Fri                  Binary       -0
Dow_Mon                  Binary        0
Dow_Sat                  Binary       -0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary       -0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                  2178.      2174
Matched (ESS)         870.84    2167
Matched (Unweighted) 2171.      2167
Unmatched               7.         7</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-3-30.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine all team-specific results into a single data frame</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>final_results <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(all_results)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the combined results</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(final_results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Estimate Std. Error     z Pr(&gt;|z|)    S   CI low CI high
   0.0940     0.0217 4.321  &lt; 0.001 16.0  0.05135  0.1366
   0.0828     0.0170 4.865  &lt; 0.001 19.7  0.04947  0.1162
   0.0782     0.0209 3.733  &lt; 0.001 12.4  0.03712  0.1192
   0.0751     0.0179 4.205  &lt; 0.001 15.2  0.04007  0.1100
   0.0503     0.0239 2.108  0.03499  4.8  0.00354  0.0971
   0.0561     0.0167 3.360  &lt; 0.001 10.3  0.02338  0.0888
   0.0191     0.0225 0.848  0.39630  1.3 -0.02498  0.0631
   0.0508     0.0219 2.321  0.02031  5.6  0.00789  0.0937
   0.0829     0.0237 3.504  &lt; 0.001 11.1  0.03653  0.1293
   0.0615     0.0231 2.659  0.00784  7.0  0.01617  0.1069
   0.0535     0.0173 3.100  0.00194  9.0  0.01969  0.0874
   0.0507     0.0184 2.755  0.00588  7.4  0.01463  0.0868
   0.0962     0.0244 3.939  &lt; 0.001 13.6  0.04833  0.1441
   0.0687     0.0182 3.770  &lt; 0.001 12.6  0.03301  0.1045
   0.0487     0.0208 2.348  0.01886  5.7  0.00806  0.0894
   0.1048     0.0361 2.904  0.00368  8.1  0.03409  0.1756
   0.0816     0.0303 2.691  0.00713  7.1  0.02217  0.1411
   0.0515     0.0192 2.676  0.00744  7.1  0.01379  0.0892
   0.0948     0.0257 3.686  &lt; 0.001 12.1  0.04440  0.1452
   0.0834     0.0230 3.624  &lt; 0.001 11.8  0.03832  0.1286
   0.0438     0.0190 2.308  0.02100  5.6  0.00661  0.0810
   0.0407     0.0171 2.374  0.01758  5.8  0.00710  0.0742
   0.0750     0.0189 3.968  &lt; 0.001 13.8  0.03796  0.1121
   0.0501     0.0186 2.699  0.00696  7.2  0.01371  0.0865
   0.1172     0.0211 5.545  &lt; 0.001 25.0  0.07580  0.1587
   0.0474     0.0578 0.820  0.41206  1.3 -0.06583  0.1606
   0.1536     0.0197 7.794  &lt; 0.001 47.1  0.11494  0.1922
   0.0700     0.0334 2.097  0.03603  4.8  0.00456  0.1355
   0.0689     0.0185 3.722  &lt; 0.001 12.3  0.03264  0.1053
   0.0920     0.0229 4.021  &lt; 0.001 14.1  0.04718  0.1369

Term: Home
Comparison: mean(1) - mean(0)
Columns: term, contrast, estimate, std.error, statistic, p.value, s.value, conf.low, conf.high, predicted_lo, predicted_hi, predicted, Team </code></pre>
</div>
</div>
</section>
<section id="add-the-team-name-to-each-row" class="level1">
<h1>add the team name to each row</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>team_names <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ANA"</span>, <span class="st">"DET"</span>, <span class="st">"KCA"</span>, <span class="st">"PHI"</span>, <span class="st">"WAS"</span>, </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BOS"</span>, <span class="st">"CIN"</span>, <span class="st">"SDN"</span>, <span class="st">"SFN"</span>, <span class="st">"SLN"</span>, </span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CLE"</span>, <span class="st">"HOU"</span>, <span class="st">"MIA"</span>, <span class="st">"MIL"</span>, <span class="st">"ARI"</span>, </span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"NYA"</span>, <span class="st">"OAK"</span>, <span class="st">"SEA"</span>, <span class="st">"TBA"</span>, <span class="st">"TEX"</span>, </span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ATL"</span>, <span class="st">"BAL"</span>, <span class="st">"CHA"</span>, <span class="st">"MIN"</span>, <span class="st">"TOR"</span>, </span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CHN"</span>, <span class="st">"COL"</span>, <span class="st">"LAN"</span>, <span class="st">"NYN"</span>, <span class="st">"PIT"</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>final_results<span class="sc">$</span>Team <span class="ot">&lt;-</span> team_names</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>ATT_results <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(final_results)</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>ATT_results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   term          contrast   estimate  std.error statistic      p.value
1  Home mean(1) - mean(0) 0.09397138 0.02174519 4.3214792 1.549867e-05
2  Home mean(1) - mean(0) 0.08284573 0.01702822 4.8652026 1.143396e-06
3  Home mean(1) - mean(0) 0.07816371 0.02093951 3.7328343 1.893372e-04
4  Home mean(1) - mean(0) 0.07505950 0.01785027 4.2049515 2.611382e-05
5  Home mean(1) - mean(0) 0.05032089 0.02386628 2.1084509 3.499200e-02
6  Home mean(1) - mean(0) 0.05610846 0.01669907 3.3599749 7.794955e-04
7  Home mean(1) - mean(0) 0.01905868 0.02246820 0.8482513 3.962980e-01
8  Home mean(1) - mean(0) 0.05078167 0.02188302 2.3205971 2.030860e-02
9  Home mean(1) - mean(0) 0.08291361 0.02366593 3.5035004 4.591859e-04
10 Home mean(1) - mean(0) 0.06152050 0.02313878 2.6587616 7.842843e-03
11 Home mean(1) - mean(0) 0.05353468 0.01726949 3.0999571 1.935486e-03
12 Home mean(1) - mean(0) 0.05069783 0.01840447 2.7546477 5.875536e-03
13 Home mean(1) - mean(0) 0.09620149 0.02442389 3.9388282 8.188053e-05
14 Home mean(1) - mean(0) 0.06874676 0.01823399 3.7702529 1.630822e-04
15 Home mean(1) - mean(0) 0.04874943 0.02075997 2.3482422 1.886225e-02
16 Home mean(1) - mean(0) 0.10484647 0.03610321 2.9040761 3.683386e-03
17 Home mean(1) - mean(0) 0.08162259 0.03033592 2.6906251 7.131829e-03
18 Home mean(1) - mean(0) 0.05150911 0.01924642 2.6762958 7.444092e-03
19 Home mean(1) - mean(0) 0.09480220 0.02571624 3.6864716 2.273848e-04
20 Home mean(1) - mean(0) 0.08344223 0.02302210 3.6244402 2.895880e-04
21 Home mean(1) - mean(0) 0.04381077 0.01898268 2.3079333 2.100284e-02
22 Home mean(1) - mean(0) 0.04067356 0.01713012 2.3743889 1.757803e-02
23 Home mean(1) - mean(0) 0.07501101 0.01890500 3.9677872 7.254306e-05
24 Home mean(1) - mean(0) 0.05009081 0.01855976 2.6988938 6.957037e-03
25 Home mean(1) - mean(0) 0.11723923 0.02114151 5.5454526 2.931947e-08
26 Home mean(1) - mean(0) 0.04737911 0.05776007 0.8202745 4.120597e-01
27 Home mean(1) - mean(0) 0.15355321 0.01970103 7.7941701 6.483317e-15
28 Home mean(1) - mean(0) 0.07001167 0.03339305 2.0965939 3.602954e-02
29 Home mean(1) - mean(0) 0.06894636 0.01852615 3.7215694 1.979884e-04
30 Home mean(1) - mean(0) 0.09204136 0.02288752 4.0214651 5.783727e-05
     s.value     conf.low  conf.high predicted_lo predicted_hi predicted Team
1  15.977496  0.051351592 0.13659116    0.4660839    0.4905487 0.4905487  ANA
2  19.738243  0.049471036 0.11622042    0.3552790    0.6691939 0.6691939  DET
3  12.366755  0.037123029 0.11920438    0.2754421    0.4612348 0.4612348  KCA
4  15.224827  0.040073622 0.11004538    0.5529842    0.4428491 0.4428491  PHI
5   4.836831  0.003543832 0.09709794    0.4258941    0.2718654 0.2718654  WAS
6  10.325172  0.023378881 0.08883803    0.4031688    0.4392724 0.4392724  BOS
7   1.335342 -0.024978183 0.06309554    0.5554405    0.5776128 0.5776128  CIN
8   5.621765  0.007891740 0.09367159    0.4585614    0.6183747 0.6183747  SDN
9  11.088634  0.036529233 0.12929799    0.6484129    0.7441565 0.7441565  SFN
10  6.994408  0.016169326 0.10687168    0.4683417    0.4985621 0.4985621  SLN
11  9.013088  0.019687101 0.08738226    0.4420344    0.6132403 0.6132403  CLE
12  7.411064  0.014625734 0.08676994    0.5365531    0.5970342 0.5970342  HOU
13 13.576120  0.048331552 0.14407142    0.4297169    0.6157850 0.6157850  MIA
14 12.582113  0.033008792 0.10448472    0.5094901    0.6151786 0.6151786  MIL
15  5.728354  0.008060642 0.08943821    0.4743434    0.4821531 0.4821531  ARI
16  8.084752  0.034085479 0.17560746    0.4178873    0.7082923 0.7082923  NYA
17  7.131512  0.022165279 0.14107991    0.5020905    0.6625065 0.6625065  OAK
18  7.069688  0.013786823 0.08923140    0.5315759    0.6009319 0.6009319  SEA
19 12.102577  0.044399290 0.14520511    0.4559788    0.5735083 0.5735083  TBA
20 11.753711  0.038319742 0.12856472    0.2855114    0.5361275 0.5361275  TEX
21  5.573271  0.006605392 0.08101615    0.5105681    0.6038939 0.6038939  ATL
22  5.830083  0.007099146 0.07424797    0.4372887    0.5289151 0.5289151  BAL
23 13.750803  0.037957896 0.11206413    0.5924342    0.6192228 0.6192228  CHA
24  7.167311  0.013714359 0.08646727    0.4229444    0.4349375 0.4349375  MIN
25 25.023566  0.075802638 0.15867583    0.3941201    0.5703504 0.5703504  TOR
26  1.279075 -0.065828543 0.16058676    0.4099558    0.4612455 0.4612455  CHN
27 47.132189  0.114939896 0.19216653    0.4529345    0.6286274 0.6286274  COL
28  4.794676  0.004562489 0.13546086    0.4609749    0.5505900 0.5505900  LAN
29 12.302296  0.032635772 0.10525696    0.4049930    0.4258302 0.4258302  NYN
30 14.077641  0.047182649 0.13690008    0.4396256    0.5197733 0.5197733  PIT</code></pre>
</div>
</div>
</section>
<section id="for-loop-for-atc-with-all-results-stored" class="level1">
<h1>For loop for ATC with all results stored</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty list to store the results for each team</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>all_results <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over team abbreviations and their data files</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (abbr <span class="cf">in</span> <span class="fu">names</span>(team_files)) {</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read the data for the current team</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  team_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(team_files[[abbr]])</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove rows with missing values in covariates</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>  team_data <span class="ot">&lt;-</span> team_data <span class="sc">%&gt;%</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Opp_Win_P_Cat),</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Opp_Playoffs),</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Opp_WS),</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Dow),</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Day_Night)</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Skip if the filtered dataset is too small</span></span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(team_data) <span class="sc">&lt;</span> <span class="dv">10</span>) { <span class="co"># Adjust the threshold as needed</span></span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Skipping team:"</span>, abbr, <span class="st">"- Not enough data after filtering</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">next</span></span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-25"><a href="#cb50-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Matching Method for ATC</span></span>
<span id="cb50-26"><a href="#cb50-26" aria-hidden="true" tabindex="-1"></a>  match_out_full_ATC <span class="ot">&lt;-</span> <span class="fu">matchit</span>(</span>
<span id="cb50-27"><a href="#cb50-27" aria-hidden="true" tabindex="-1"></a>    Home <span class="sc">~</span> Opp_Win_P_Cat <span class="sc">+</span> Opp_Playoffs <span class="sc">+</span> Opp_WS <span class="sc">+</span> Dow <span class="sc">+</span> Day_Night,</span>
<span id="cb50-28"><a href="#cb50-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> team_data,</span>
<span id="cb50-29"><a href="#cb50-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"full"</span>,</span>
<span id="cb50-30"><a href="#cb50-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">exact =</span> <span class="sc">~</span> Opp_Win_P_Cat <span class="sc">+</span> Opp_Playoffs <span class="sc">+</span> Opp_WS <span class="sc">+</span> Dow <span class="sc">+</span> Day_Night,</span>
<span id="cb50-31"><a href="#cb50-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">distance =</span> <span class="st">"glm"</span>,</span>
<span id="cb50-32"><a href="#cb50-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimand =</span> <span class="st">"ATC"</span></span>
<span id="cb50-33"><a href="#cb50-33" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb50-34"><a href="#cb50-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-35"><a href="#cb50-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Print balance table (optional, for debugging/validation)</span></span>
<span id="cb50-36"><a href="#cb50-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Balance Table for"</span>, abbr, <span class="st">":</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb50-37"><a href="#cb50-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">bal.tab</span>(match_out_full_ATC))</span>
<span id="cb50-38"><a href="#cb50-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-39"><a href="#cb50-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Summary and plot (optional, for diagnostics)</span></span>
<span id="cb50-40"><a href="#cb50-40" aria-hidden="true" tabindex="-1"></a>  match_out_full_summ <span class="ot">&lt;-</span> <span class="fu">summary</span>(match_out_full_ATC, <span class="at">interactions =</span> <span class="cn">TRUE</span>)</span>
<span id="cb50-41"><a href="#cb50-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(match_out_full_summ)  <span class="co"># Plot diagnostic information</span></span>
<span id="cb50-42"><a href="#cb50-42" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-43"><a href="#cb50-43" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract matched data</span></span>
<span id="cb50-44"><a href="#cb50-44" aria-hidden="true" tabindex="-1"></a>  match_data_full <span class="ot">&lt;-</span> <span class="fu">match.data</span>(match_out_full_ATC)</span>
<span id="cb50-45"><a href="#cb50-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-46"><a href="#cb50-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Dynamically construct the dependent variable name</span></span>
<span id="cb50-47"><a href="#cb50-47" aria-hidden="true" tabindex="-1"></a>  dependent_var <span class="ot">&lt;-</span> <span class="fu">paste0</span>(abbr, <span class="st">"_win"</span>)</span>
<span id="cb50-48"><a href="#cb50-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-49"><a href="#cb50-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Construct the formula dynamically</span></span>
<span id="cb50-50"><a href="#cb50-50" aria-hidden="true" tabindex="-1"></a>  formula_str <span class="ot">&lt;-</span> <span class="fu">paste0</span>(dependent_var, <span class="st">" ~ Home * (Opp_Win_P_Cat + Opp_Playoffs + Opp_WS + Attendance + Dow + Day_Night)"</span>)</span>
<span id="cb50-51"><a href="#cb50-51" aria-hidden="true" tabindex="-1"></a>  formula <span class="ot">&lt;-</span> <span class="fu">as.formula</span>(formula_str)</span>
<span id="cb50-52"><a href="#cb50-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-53"><a href="#cb50-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Regression model based on matched data</span></span>
<span id="cb50-54"><a href="#cb50-54" aria-hidden="true" tabindex="-1"></a>  mod2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(formula, <span class="at">data =</span> match_data_full, <span class="at">weights =</span> weights)</span>
<span id="cb50-55"><a href="#cb50-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-56"><a href="#cb50-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Estimating ATC from the model</span></span>
<span id="cb50-57"><a href="#cb50-57" aria-hidden="true" tabindex="-1"></a>  att_results <span class="ot">&lt;-</span> <span class="fu">avg_comparisons</span>(</span>
<span id="cb50-58"><a href="#cb50-58" aria-hidden="true" tabindex="-1"></a>    mod2,</span>
<span id="cb50-59"><a href="#cb50-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">variables =</span> <span class="st">"Home"</span>,</span>
<span id="cb50-60"><a href="#cb50-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">vcov =</span> <span class="sc">~</span>subclass,</span>
<span id="cb50-61"><a href="#cb50-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">newdata =</span> <span class="fu">filter</span>(match_data_full, Home <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb50-62"><a href="#cb50-62" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb50-63"><a href="#cb50-63" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-64"><a href="#cb50-64" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add the team abbreviation to the results</span></span>
<span id="cb50-65"><a href="#cb50-65" aria-hidden="true" tabindex="-1"></a>  att_results <span class="ot">&lt;-</span> att_results <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Team =</span> abbr)</span>
<span id="cb50-66"><a href="#cb50-66" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-67"><a href="#cb50-67" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Store results in the list</span></span>
<span id="cb50-68"><a href="#cb50-68" aria-hidden="true" tabindex="-1"></a>  all_results[[abbr]] <span class="ot">&lt;-</span> att_results</span>
<span id="cb50-69"><a href="#cb50-69" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for ANA :
Balance Measures
                           Type Diff.Adj
distance               Distance       -0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary       -0
Opp_Playoffs             Binary        0
Opp_WS                   Binary       -0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary       -0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary       -0
Day_Night_N              Binary       -0

Sample sizes
                     Control Treated
All                     2176 2180.  
Matched (ESS)           2153  589.97
Matched (Unweighted)    2153 2180.  
Unmatched                 23    0.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for DET :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary       -0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary       -0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary       -0
Dow_Mon                  Binary       -0
Dow_Sat                  Binary        0
Dow_Sun                  Binary       -0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2165 2167.  
Matched (ESS)           2163  802.94
Matched (Unweighted)    2163 2152.  
Unmatched                  2   15.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for KCA :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary       -0
Opp_WS                   Binary       -0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2167 2161.  
Matched (ESS)           2162  805.97
Matched (Unweighted)    2162 2157.  
Unmatched                  5    4.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for PHI :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2175 2180.  
Matched (ESS)           2163 1280.06
Matched (Unweighted)    2163 2179.  
Unmatched                 12    1.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for WAS :
Balance Measures
                           Type Diff.Adj
distance               Distance       -0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary       -0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     1377 1375.  
Matched (ESS)           1364  436.83
Matched (Unweighted)    1364 1357.  
Unmatched                 13   18.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for BOS :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2164 2165.  
Matched (ESS)           2156 1145.04
Matched (Unweighted)    2156 2155.  
Unmatched                  8   10.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for CIN :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary       -0
Opp_Win_P_Cat_Great      Binary       -0
Opp_Win_P_Cat_Terrible   Binary       -0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary       -0
Dow_Sun                  Binary        0
Dow_Thu                  Binary       -0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary       -0

Sample sizes
                     Control Treated
All                     2179 2180.  
Matched (ESS)           2162  925.92
Matched (Unweighted)    2162 2173.  
Unmatched                 17    7.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for SDN :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary       -0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2179 2178.  
Matched (ESS)           2163  810.15
Matched (Unweighted)    2163 2173.  
Unmatched                 16    5.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for SFN :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2174 2181.  
Matched (ESS)           2164  449.89
Matched (Unweighted)    2164 2172.  
Unmatched                 10    9.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for SLN :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary       -0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary       -0
Dow_Tue                  Binary       -0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2176 2178.  
Matched (ESS)           2148 1012.97
Matched (Unweighted)    2148 2170.  
Unmatched                 28    8.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for CLE :
Balance Measures
                           Type Diff.Adj
distance               Distance       -0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary       -0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary       -0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2169 2165.  
Matched (ESS)           2158 1333.81
Matched (Unweighted)    2158 2155.  
Unmatched                 11   10.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for HOU :
Balance Measures
                           Type Diff.Adj
distance               Distance       -0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary       -0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary       -0
Dow_Mon                  Binary       -0
Dow_Sat                  Binary       -0
Dow_Sun                  Binary        0
Dow_Thu                  Binary       -0
Dow_Tue                  Binary        0
Dow_Wed                  Binary       -0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2178 2178.  
Matched (ESS)           2160 1105.83
Matched (Unweighted)    2160 2173.  
Unmatched                 18    5.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for MIA :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2184 2167.  
Matched (ESS)           2150  993.06
Matched (Unweighted)    2150 2162.  
Unmatched                 34    5.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for MIL :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary       -0
Opp_Win_P_Cat_Good       Binary       -0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary       -0
Opp_Playoffs             Binary       -0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary       -0
Dow_Sat                  Binary       -0
Dow_Sun                  Binary       -0
Dow_Thu                  Binary       -0
Dow_Tue                  Binary       -0
Dow_Wed                  Binary        0
Day_Night_N              Binary       -0

Sample sizes
                     Control Treated
All                     2167 2169.  
Matched (ESS)           2156 1096.78
Matched (Unweighted)    2156 2160.  
Unmatched                 11    9.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for ARI :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary       -0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     1944 1944.  
Matched (ESS)           1916  583.61
Matched (Unweighted)    1916 1932.  
Unmatched                 28   12.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for NYA :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2167 2163.  
Matched (ESS)           2162  436.05
Matched (Unweighted)    2162 2144.  
Unmatched                  5   19.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for OAK :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary       -0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary       -0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary       -0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2164 2164.  
Matched (ESS)           2155  356.21
Matched (Unweighted)    2155 2159.  
Unmatched                  9    5.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for SEA :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary       -0
Opp_Win_P_Cat_Good       Binary       -0
Opp_Win_P_Cat_Great      Binary       -0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary       -0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary       -0
Dow_Tue                  Binary       -0
Dow_Wed                  Binary       -0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2158 2171.  
Matched (ESS)           2153  997.79
Matched (Unweighted)    2153 2159.  
Unmatched                  5   12.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for TBA :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     1941 1945.  
Matched (ESS)           1912 1105.33
Matched (Unweighted)    1912 1942.  
Unmatched                 29    3.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for TEX :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary       -0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2165 2167.  
Matched (ESS)           2150  489.51
Matched (Unweighted)    2150 2157.  
Unmatched                 15   10.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for ATL :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2176 2178.  
Matched (ESS)           2153  912.11
Matched (Unweighted)    2153 2168.  
Unmatched                 23   10.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for BAL :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary       -0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary       -0
Dow_Sun                  Binary       -0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2170 2162.  
Matched (ESS)           2165 1354.37
Matched (Unweighted)    2165 2156.  
Unmatched                  5    6.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for CHA :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2166  2167. 
Matched (ESS)           2162  1295.5
Matched (Unweighted)    2162  2156. 
Unmatched                  4    11. </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for MIN :
Balance Measures
                           Type Diff.Adj
distance               Distance       -0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary       -0
Dow_Thu                  Binary        0
Dow_Tue                  Binary       -0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2164 2167.  
Matched (ESS)           2154 1316.84
Matched (Unweighted)    2154 2157.  
Unmatched                 10   10.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for TOR :
Balance Measures
                           Type Diff.Adj
distance               Distance       -0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary       -0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary       -0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2170 2164.  
Matched (ESS)           2147  222.52
Matched (Unweighted)    2147 2160.  
Unmatched                 23    4.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for CHN :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary       -0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary       -0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2176  2180. 
Matched (ESS)           2051    95.1
Matched (Unweighted)    2051  2141. 
Unmatched                125    39. </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-26.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for COL :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2179 2179.  
Matched (ESS)           2171 1142.62
Matched (Unweighted)    2171 2173.  
Unmatched                  8    6.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-27.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for LAN :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2177 2179.  
Matched (ESS)           2145  597.77
Matched (Unweighted)    2145 2171.  
Unmatched                 32    8.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-28.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for NYN :
Balance Measures
                           Type Diff.Adj
distance               Distance       -0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary        0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary        0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary       -0
Dow_Mon                  Binary       -0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary       -0
Dow_Wed                  Binary       -0
Day_Night_N              Binary        0

Sample sizes
                     Control Treated
All                     2178  2177. 
Matched (ESS)           2171   980.2
Matched (Unweighted)    2171  2168. 
Unmatched                  7     9. </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-29.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for PIT :
Balance Measures
                           Type Diff.Adj
distance               Distance        0
Opp_Win_P_Cat_Bad        Binary        0
Opp_Win_P_Cat_Good       Binary       -0
Opp_Win_P_Cat_Great      Binary        0
Opp_Win_P_Cat_Terrible   Binary       -0
Opp_Playoffs             Binary        0
Opp_WS                   Binary        0
Dow_Fri                  Binary        0
Dow_Mon                  Binary        0
Dow_Sat                  Binary        0
Dow_Sun                  Binary        0
Dow_Thu                  Binary        0
Dow_Tue                  Binary        0
Dow_Wed                  Binary        0
Day_Night_N              Binary       -0

Sample sizes
                     Control Treated
All                     2178 2174.  
Matched (ESS)           2171  805.05
Matched (Unweighted)    2171 2167.  
Unmatched                  7    7.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Posner2_files/figure-html/unnamed-chunk-5-30.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine all team-specific results into a single data frame</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>final_results2 <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(all_results)</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the combined results</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(final_results2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Estimate Std. Error     z Pr(&gt;|z|)    S   CI low CI high
   0.0663     0.0275  2.41  0.01576  6.0  0.01248  0.1201
   0.0878     0.0198  4.43  &lt; 0.001 16.7  0.04897  0.1266
   0.0507     0.0203  2.49  0.01272  6.3  0.01081  0.0906
   0.0464     0.0164  2.83  0.00462  7.8  0.01429  0.0785
   0.0531     0.0257  2.07  0.03848  4.7  0.00282  0.1035
   0.0353     0.0209  1.69  0.09142  3.5 -0.00569  0.0763
   0.0387     0.0187  2.07  0.03873  4.7  0.00201  0.0754
   0.0677     0.0203  3.33  &lt; 0.001 10.2  0.02786  0.1075
   0.1190     0.0239  4.98  &lt; 0.001 20.6  0.07223  0.1658
   0.0372     0.0345  1.08  0.28182  1.8 -0.03052  0.1048
   0.0669     0.0167  4.01  &lt; 0.001 14.0  0.03426  0.0996
   0.0505     0.0168  3.01  0.00259  8.6  0.01764  0.0833
   0.1277     0.0248  5.15  &lt; 0.001 21.9  0.07910  0.1763
   0.0656     0.0176  3.72  &lt; 0.001 12.3  0.03106  0.1001
   0.0494     0.0206  2.40  0.01647  5.9  0.00903  0.0897
   0.0513     0.0282  1.82  0.06906  3.9 -0.00401  0.1067
   0.0846     0.0376  2.25  0.02427  5.4  0.01100  0.1582
   0.0580     0.0182  3.19  0.00141  9.5  0.02238  0.0936
   0.0991     0.0278  3.56  &lt; 0.001 11.4  0.04459  0.1536
   0.1197     0.0230  5.19  &lt; 0.001 22.2  0.07453  0.1649
   0.0440     0.0194  2.27  0.02312  5.4  0.00603  0.0819
   0.0588     0.0171  3.45  &lt; 0.001 10.8  0.02541  0.0923
   0.0635     0.0185  3.43  &lt; 0.001 10.7  0.02725  0.0998
   0.0764     0.0171  4.46  &lt; 0.001 16.9  0.04287  0.1100
   0.0798     0.0291  2.74  0.00616  7.3  0.02270  0.1369
  -0.0712     0.0271 -2.63  0.00852  6.9 -0.12426 -0.0182
   0.1075     0.0213  5.04  &lt; 0.001 21.0  0.06572  0.1493
   0.0742     0.0234  3.17  0.00150  9.4  0.02838  0.1199
   0.0585     0.0187  3.13  0.00175  9.2  0.02186  0.0951
   0.1125     0.0245  4.60  &lt; 0.001 17.8  0.06456  0.1605

Term: Home
Comparison: mean(1) - mean(0)
Columns: term, contrast, estimate, std.error, statistic, p.value, s.value, conf.low, conf.high, predicted_lo, predicted_hi, predicted, Team </code></pre>
</div>
</div>
</section>
<section id="add-the-team-name-to-each-row-1" class="level1">
<h1>add the team name to each row</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>team_names <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ANA"</span>, <span class="st">"DET"</span>, <span class="st">"KCA"</span>, <span class="st">"PHI"</span>, <span class="st">"WAS"</span>, </span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BOS"</span>, <span class="st">"CIN"</span>, <span class="st">"SDN"</span>, <span class="st">"SFN"</span>, <span class="st">"SLN"</span>, </span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CLE"</span>, <span class="st">"HOU"</span>, <span class="st">"MIA"</span>, <span class="st">"MIL"</span>, <span class="st">"ARI"</span>, </span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"NYA"</span>, <span class="st">"OAK"</span>, <span class="st">"SEA"</span>, <span class="st">"TBA"</span>, <span class="st">"TEX"</span>, </span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ATL"</span>, <span class="st">"BAL"</span>, <span class="st">"CHA"</span>, <span class="st">"MIN"</span>, <span class="st">"TOR"</span>, </span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CHN"</span>, <span class="st">"COL"</span>, <span class="st">"LAN"</span>, <span class="st">"NYN"</span>, <span class="st">"PIT"</span></span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>final_results2<span class="sc">$</span>Team <span class="ot">&lt;-</span> team_names</span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>ATC_results <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(final_results2)</span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a>ATC_results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   term          contrast    estimate  std.error statistic      p.value
1  Home mean(1) - mean(0)  0.06630604 0.02746130  2.414527 1.575566e-02
2  Home mean(1) - mean(0)  0.08780865 0.01981592  4.431218 9.370231e-06
3  Home mean(1) - mean(0)  0.05068436 0.02034390  2.491379 1.272483e-02
4  Home mean(1) - mean(0)  0.04637979 0.01637448  2.832443 4.619380e-03
5  Home mean(1) - mean(0)  0.05313896 0.02567478  2.069695 3.848095e-02
6  Home mean(1) - mean(0)  0.03530840 0.02091766  1.687971 9.141677e-02
7  Home mean(1) - mean(0)  0.03869817 0.01872120  2.067078 3.872684e-02
8  Home mean(1) - mean(0)  0.06767907 0.02031469  3.331533 8.636911e-04
9  Home mean(1) - mean(0)  0.11904087 0.02388107  4.984737 6.204611e-07
10 Home mean(1) - mean(0)  0.03716317 0.03453081  1.076232 2.818234e-01
11 Home mean(1) - mean(0)  0.06694134 0.01667517  4.014433 5.958887e-05
12 Home mean(1) - mean(0)  0.05048774 0.01676081  3.012249 2.593197e-03
13 Home mean(1) - mean(0)  0.12770190 0.02479858  5.149565 2.610908e-07
14 Home mean(1) - mean(0)  0.06558281 0.01761454  3.723220 1.966981e-04
15 Home mean(1) - mean(0)  0.04937376 0.02058623  2.398387 1.646745e-02
16 Home mean(1) - mean(0)  0.05133665 0.02823785  1.818008 6.906285e-02
17 Home mean(1) - mean(0)  0.08459841 0.03755228  2.252817 2.427071e-02
18 Home mean(1) - mean(0)  0.05798319 0.01816542  3.191955 1.413135e-03
19 Home mean(1) - mean(0)  0.09910010 0.02781289  3.563100 3.665005e-04
20 Home mean(1) - mean(0)  0.11970890 0.02304887  5.193698 2.061573e-07
21 Home mean(1) - mean(0)  0.04397258 0.01935941  2.271380 2.312399e-02
22 Home mean(1) - mean(0)  0.05884163 0.01705804  3.449496 5.616345e-04
23 Home mean(1) - mean(0)  0.06353825 0.01851718  3.431314 6.006651e-04
24 Home mean(1) - mean(0)  0.07644718 0.01713093  4.462522 8.100053e-06
25 Home mean(1) - mean(0)  0.07979334 0.02913151  2.739073 6.161264e-03
26 Home mean(1) - mean(0) -0.07121010 0.02706654 -2.630927 8.515234e-03
27 Home mean(1) - mean(0)  0.10752752 0.02133051  5.041020 4.630571e-07
28 Home mean(1) - mean(0)  0.07415115 0.02335554  3.174885 1.498958e-03
29 Home mean(1) - mean(0)  0.05848626 0.01868953  3.129360 1.751876e-03
30 Home mean(1) - mean(0)  0.11253658 0.02447787  4.597483 4.276259e-06
     s.value     conf.low   conf.high predicted_lo predicted_hi predicted Team
1   5.987986  0.012482885  0.12012919    0.6597491    0.6086952 0.6597491  ANA
2  16.703484  0.048970165  0.12664713    0.3767491    0.4890267 0.3767491  DET
3   6.296210  0.010811053  0.09055767    0.4666688    0.4869061 0.4666688  KCA
4   7.758085  0.014286394  0.07847319    0.4207806    0.2991619 0.4207806  PHI
5   4.699712  0.002817310  0.10346060    0.7583321    0.9977189 0.7583321  WAS
6   3.451397 -0.005689454  0.07630626    0.5609985    0.6910952 0.5609985  BOS
7   4.690522  0.002005295  0.07539105    0.3281776    0.4599863 0.3281776  CIN
8  10.177197  0.027863001  0.10749514    0.3390211    0.3220944 0.3390211  SDN
9  20.620156  0.072234828  0.16584691    0.4407505    0.3974231 0.4407505  SFN
10  1.827137 -0.030515966  0.10484230    0.3969060    0.4764796 0.3969060  SLN
11 14.034598  0.034258612  0.09962406    0.4947857    0.6197809 0.4947857  CLE
12  8.591052  0.017637154  0.08333833    0.2792716    0.3748088 0.2792716  HOU
13 21.868945  0.079097578  0.17630622    0.4498544    0.5940050 0.4498544  MIA
14 12.311729  0.031058942  0.10010667    0.4386894    0.3796158 0.4386894  MIL
15  5.924239  0.009025481  0.08972204    0.3852785    0.5348197 0.3852785  ARI
16  3.855946 -0.004008521  0.10668181    0.4547457    0.5296146 0.4547457  NYA
17  5.364640  0.010997287  0.15819953    0.3911050    0.4819069 0.3911050  OAK
18  9.466885  0.022379626  0.09358676    0.5029085    0.6174493 0.5029085  SEA
19 11.413897  0.044587847  0.15361235    0.4622593    0.5960073 0.4622593  TBA
20 22.209751  0.074533934  0.16488386    0.4261276    0.6336560 0.4261276  TEX
21  5.434466  0.006028829  0.08191634    0.5484410    0.5427319 0.5484410  ATL
22 10.798081  0.025408491  0.09227477    0.5785665    0.5544699 0.5785665  BAL
23 10.701151  0.027245247  0.09983125    0.3957986    0.3647791 0.3957986  CHA
24 16.913637  0.042871161  0.11002319    0.5839536    0.7251477 0.5839536  MIN
25  7.342558  0.022696629  0.13689005    0.5758976    0.7638710 0.5758976  TOR
26  6.875738 -0.124259545 -0.01816065    0.4723944    0.3182919 0.4723944  CHN
27 21.042307  0.065720494  0.14933455    0.3407343    0.5075683 0.3407343  COL
28  9.381824  0.028375136  0.11992716    0.5251557    0.3835123 0.5251557  LAN
29  9.156883  0.021855456  0.09511706    0.4713852    0.5235944 0.4713852  NYN
30 17.835219  0.064560838  0.16051232    0.3113341    0.5002075 0.3113341  PIT</code></pre>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>