<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Analysis_files/libs/clipboard/clipboard.min.js"></script>
<script src="Analysis_files/libs/quarto-html/quarto.js"></script>
<script src="Analysis_files/libs/quarto-html/popper.min.js"></script>
<script src="Analysis_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Analysis_files/libs/quarto-html/anchor.min.js"></script>
<link href="Analysis_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Analysis_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Analysis_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Analysis_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Analysis_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ forcats   1.0.0     ✔ readr     2.1.4
✔ ggplot2   3.5.1     ✔ stringr   1.5.0
✔ lubridate 1.9.2     ✔ tibble    3.2.1
✔ purrr     1.0.2     ✔ tidyr     1.3.0</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MatchIt)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(marginaleffects)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'marginaleffects' was built under R version 4.3.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dagitty)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'scales'

The following object is masked from 'package:purrr':

    discard

The following object is masked from 'package:readr':

    col_factor</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cobalt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code> cobalt (Version 4.5.5, Build Date: 2024-04-02)

Attaching package: 'cobalt'

The following object is masked from 'package:MatchIt':

    lalonde</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: viridisLite

Attaching package: 'viridis'

The following object is masked from 'package:scales':

    viridis_pal</code></pre>
</div>
</div>
<section id="for-loop-for-att-for-all-teams" class="level1">
<h1>For loop for ATT for all teams</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>team_files <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">ANA =</span> <span class="st">"Data/Team Datasets/ANA_games.csv"</span>,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">DET =</span> <span class="st">"Data/Team Datasets/DET_games.csv"</span>,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">KCA =</span> <span class="st">"Data/Team Datasets/KCA_games.csv"</span>,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">PHI =</span> <span class="st">"Data/Team Datasets/PHI_games.csv"</span>,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">WAS =</span> <span class="st">"Data/Team Datasets/WAS_games.csv"</span>,</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">BOS =</span> <span class="st">"Data/Team Datasets/BOS_games.csv"</span>,</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">CIN =</span> <span class="st">"Data/Team Datasets/CIN_games.csv"</span>,</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">SDN =</span> <span class="st">"Data/Team Datasets/SDN_games.csv"</span>,</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">SFN =</span> <span class="st">"Data/Team Datasets/SFN_games.csv"</span>,</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">SLN =</span> <span class="st">"Data/Team Datasets/SLN_games.csv"</span>,</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">CLE =</span> <span class="st">"Data/Team Datasets/CLE_games.csv"</span>,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">HOU =</span> <span class="st">"Data/Team Datasets/HOU_games.csv"</span>,</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">MIA =</span> <span class="st">"Data/Team Datasets/MIA_games.csv"</span>,</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">MIL =</span> <span class="st">"Data/Team Datasets/MIL_games.csv"</span>,</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">ARI =</span> <span class="st">"Data/Team Datasets/ARI_games.csv"</span>,</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">NYA =</span> <span class="st">"Data/Team Datasets/NYA_games.csv"</span>,</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">OAK =</span> <span class="st">"Data/Team Datasets/OAK_games.csv"</span>,</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">SEA =</span> <span class="st">"Data/Team Datasets/SEA_games.csv"</span>,</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">TBA =</span> <span class="st">"Data/Team Datasets/TBA_games.csv"</span>,</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">TEX =</span> <span class="st">"Data/Team Datasets/TEX_games.csv"</span>,</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">ATL =</span> <span class="st">"Data/Team Datasets/ATL_games.csv"</span>,</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">BAL =</span> <span class="st">"Data/Team Datasets/BAL_games.csv"</span>,</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">CHA =</span> <span class="st">"Data/Team Datasets/CHA_games.csv"</span>,</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">MIN =</span> <span class="st">"Data/Team Datasets/MIN_games.csv"</span>,</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">TOR =</span> <span class="st">"Data/Team Datasets/TOR_games.csv"</span>,</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">CHN =</span> <span class="st">"Data/Team Datasets/CHN_games.csv"</span>,</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">COL =</span> <span class="st">"Data/Team Datasets/COL_games.csv"</span>,</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">LAN =</span> <span class="st">"Data/Team Datasets/LAN_games.csv"</span>,</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">NYN =</span> <span class="st">"Data/Team Datasets/NYN_games.csv"</span>,</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">PIT =</span> <span class="st">"Data/Team Datasets/PIT_games.csv"</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load required packages</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MatchIt)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(marginaleffects)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty list to store the results for each team</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>all_results <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over team abbreviations and their data files</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (abbr <span class="cf">in</span> <span class="fu">names</span>(team_files)) {</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read the data for the current team</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  team_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(team_files[[abbr]])</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Remove rows with missing values in covariates</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  team_data <span class="ot">&lt;-</span> team_data <span class="sc">%&gt;%</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Opp_Win_P_Cat),</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Opp_Playoffs),</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Opp_WS),</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Dow),</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Day_Night),</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Away_SP_WAR), </span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Home_SP_WAR)</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Skip if the filtered dataset is too small</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(team_data) <span class="sc">&lt;</span> <span class="dv">10</span>) { <span class="co"># Adjust the threshold as needed</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Skipping team:"</span>, abbr, <span class="st">"- Not enough data after filtering</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">next</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Matching Method for ATT</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>  match_out_full <span class="ot">&lt;-</span> <span class="fu">matchit</span>(</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>    Home <span class="sc">~</span> Opp_Win_P_Cat <span class="sc">+</span> Opp_Playoffs <span class="sc">+</span> Opp_WS <span class="sc">+</span> Dow <span class="sc">+</span> Day_Night <span class="sc">+</span> Away_SP_WAR <span class="sc">+</span> Home_SP_WAR,</span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> team_data,</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"full"</span>,</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">exact =</span> <span class="sc">~</span> Opp_Win_P_Cat <span class="sc">+</span> Opp_Playoffs <span class="sc">+</span> Opp_WS <span class="sc">+</span> Dow <span class="sc">+</span> Day_Night,</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">distance =</span> <span class="st">"glm"</span>,</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimand =</span> <span class="st">"ATT"</span></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Print balance table (optional, for debugging/validation)</span></span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Balance Table for"</span>, abbr, <span class="st">":</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">bal.tab</span>(match_out_full))</span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Summary and plot (optional, for diagnostics)</span></span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>  match_out_full_summ <span class="ot">&lt;-</span> <span class="fu">summary</span>(match_out_full, <span class="at">interactions =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(match_out_full_summ)  <span class="co"># Plot diagnostic information</span></span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract matched data</span></span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>  match_data_full <span class="ot">&lt;-</span> <span class="fu">match.data</span>(match_out_full)</span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Dynamically construct the dependent variable name</span></span>
<span id="cb17-54"><a href="#cb17-54" aria-hidden="true" tabindex="-1"></a>  dependent_var <span class="ot">&lt;-</span> <span class="fu">paste0</span>(abbr, <span class="st">"_win"</span>)</span>
<span id="cb17-55"><a href="#cb17-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-56"><a href="#cb17-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Construct the formula dynamically</span></span>
<span id="cb17-57"><a href="#cb17-57" aria-hidden="true" tabindex="-1"></a>  formula_str <span class="ot">&lt;-</span> <span class="fu">paste0</span>(dependent_var, <span class="st">" ~ Home * (Opp_Win_P_Cat + Opp_Playoffs + Opp_WS + Dow + Day_Night + Away_SP_WAR + Home_SP_WAR)"</span>)</span>
<span id="cb17-58"><a href="#cb17-58" aria-hidden="true" tabindex="-1"></a>  formula <span class="ot">&lt;-</span> <span class="fu">as.formula</span>(formula_str)</span>
<span id="cb17-59"><a href="#cb17-59" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-60"><a href="#cb17-60" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Regression model based on matched data</span></span>
<span id="cb17-61"><a href="#cb17-61" aria-hidden="true" tabindex="-1"></a>  mod2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(formula, <span class="at">data =</span> match_data_full, <span class="at">weights =</span> weights)</span>
<span id="cb17-62"><a href="#cb17-62" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-63"><a href="#cb17-63" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-64"><a href="#cb17-64" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Estimating ATT from the model</span></span>
<span id="cb17-65"><a href="#cb17-65" aria-hidden="true" tabindex="-1"></a>  att_results <span class="ot">&lt;-</span> <span class="fu">avg_comparisons</span>(</span>
<span id="cb17-66"><a href="#cb17-66" aria-hidden="true" tabindex="-1"></a>    mod2,</span>
<span id="cb17-67"><a href="#cb17-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">variables =</span> <span class="st">"Home"</span>,</span>
<span id="cb17-68"><a href="#cb17-68" aria-hidden="true" tabindex="-1"></a>    <span class="at">vcov =</span> <span class="sc">~</span>subclass,</span>
<span id="cb17-69"><a href="#cb17-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">newdata =</span> <span class="fu">filter</span>(match_data_full, Home <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb17-70"><a href="#cb17-70" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-71"><a href="#cb17-71" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-72"><a href="#cb17-72" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add the team abbreviation to the results</span></span>
<span id="cb17-73"><a href="#cb17-73" aria-hidden="true" tabindex="-1"></a>  att_results <span class="ot">&lt;-</span> att_results <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Team =</span> abbr)</span>
<span id="cb17-74"><a href="#cb17-74" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-75"><a href="#cb17-75" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Store results in the list</span></span>
<span id="cb17-76"><a href="#cb17-76" aria-hidden="true" tabindex="-1"></a>  all_results[[abbr]] <span class="ot">&lt;-</span> att_results</span>
<span id="cb17-77"><a href="#cb17-77" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for ANA :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0185
Opp_Win_P_Cat_Bad        Binary  -0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary  -0.0000
Dow_Mon                  Binary  -0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary  -0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0762
Home_SP_WAR             Contin.  -0.0029

Sample sizes
                     Control Treated
All                  2179.      2184
Matched (ESS)         887.11    2184
Matched (Unweighted) 2156.      2184
Unmatched              23.         0</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for DET :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0058
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary  -0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary  -0.0000
Away_SP_WAR             Contin.  -0.0772
Home_SP_WAR             Contin.  -0.0540

Sample sizes
                     Control Treated
All                  2171.      2176
Matched (ESS)        1012.03    2160
Matched (Unweighted) 2169.      2160
Unmatched               2.        16</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for KCA :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0252
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0337
Home_SP_WAR             Contin.  -0.0064

Sample sizes
                     Control Treated
All                  2167.      2165
Matched (ESS)         942.13    2161
Matched (Unweighted) 2162.      2161
Unmatched               5.         4</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for PHI :
Balance Measures
                           Type Diff.Adj
distance               Distance  -0.0030
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary  -0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0199
Home_SP_WAR             Contin.  -0.0013

Sample sizes
                     Control Treated
All                  2179.      2186
Matched (ESS)        1001.13    2185
Matched (Unweighted) 2167.      2185
Unmatched              12.         1</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for WAS :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0104
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0124
Home_SP_WAR             Contin.   0.0149

Sample sizes
                     Control Treated
All                  1378.      1371
Matched (ESS)         645.56    1353
Matched (Unweighted) 1365.      1353
Unmatched              13.        18</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for BOS :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0372
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0267
Home_SP_WAR             Contin.   0.0329

Sample sizes
                     Control Treated
All                  2168.      2166
Matched (ESS)        1022.64    2155
Matched (Unweighted) 2160.      2155
Unmatched               8.        11</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for CIN :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0711
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0530
Home_SP_WAR             Contin.  -0.0598

Sample sizes
                     Control Treated
All                  2198.      2188
Matched (ESS)         950.12    2181
Matched (Unweighted) 2181.      2181
Unmatched              17.         7</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for SDN :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0536
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary  -0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0775
Home_SP_WAR             Contin.  -0.0043

Sample sizes
                     Control Treated
All                  2184.      2182
Matched (ESS)         819.27    2177
Matched (Unweighted) 2168.      2177
Unmatched              16.         5</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for SFN :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0127
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary  -0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary  -0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary  -0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary  -0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0195
Home_SP_WAR             Contin.  -0.0372

Sample sizes
                     Control Treated
All                  2178.      2185
Matched (ESS)         877.03    2176
Matched (Unweighted) 2168.      2176
Unmatched              10.         9</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for SLN :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0053
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0255
Home_SP_WAR             Contin.  -0.0018

Sample sizes
                     Control Treated
All                  2198.      2202
Matched (ESS)        1042.65    2194
Matched (Unweighted) 2170.      2194
Unmatched              28.         8</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for CLE :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0029
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary  -0.0000
Away_SP_WAR             Contin.  -0.0117
Home_SP_WAR             Contin.  -0.0003

Sample sizes
                     Control Treated
All                   2170.     2167
Matched (ESS)          958.4    2156
Matched (Unweighted)  2155.     2156
Unmatched               15.       11</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for HOU :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0087
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary  -0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0121
Home_SP_WAR             Contin.   0.0098

Sample sizes
                     Control Treated
All                  2198.      2205
Matched (ESS)         972.79    2198
Matched (Unweighted) 2180.      2198
Unmatched              18.         7</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for MIA :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0065
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary  -0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary  -0.0000
Day_Night_N              Binary  -0.0000
Away_SP_WAR             Contin.  -0.0107
Home_SP_WAR             Contin.  -0.0264

Sample sizes
                     Control Treated
All                  2190.      2167
Matched (ESS)        1016.18    2163
Matched (Unweighted) 2156.      2163
Unmatched              34.         4</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for MIL :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0648
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary  -0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0573
Home_SP_WAR             Contin.  -0.0388

Sample sizes
                     Control Treated
All                  2179.      2185
Matched (ESS)         855.35    2175
Matched (Unweighted) 2168.      2175
Unmatched              11.        10</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for ARI :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0248
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0336
Home_SP_WAR             Contin.   0.0661

Sample sizes
                     Control Treated
All                  1945.      1948
Matched (ESS)         821.55    1936
Matched (Unweighted) 1917.      1936
Unmatched              28.        12</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for NYA :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0241
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary  -0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0778
Home_SP_WAR             Contin.  -0.0256

Sample sizes
                     Control Treated
All                  2169.      2166
Matched (ESS)         693.48    2147
Matched (Unweighted) 2164.      2147
Unmatched               5.        19</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for OAK :
Balance Measures
                           Type Diff.Adj
distance               Distance  -0.0028
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary  -0.0000
Opp_Win_P_Cat_Terrible   Binary  -0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary  -0.0000
Dow_Mon                  Binary  -0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0136
Home_SP_WAR             Contin.  -0.0085

Sample sizes
                     Control Treated
All                  2171.      2170
Matched (ESS)         842.15    2165
Matched (Unweighted) 2162.      2165
Unmatched               9.         5</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for SEA :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0038
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary  -0.0000
Opp_WS                   Binary  -0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0210
Home_SP_WAR             Contin.   0.0245

Sample sizes
                     Control Treated
All                  2165.      2181
Matched (ESS)        1152.05    2169
Matched (Unweighted) 2160.      2169
Unmatched               5.        12</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for TBA :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0364
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary  -0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary  -0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0493
Home_SP_WAR             Contin.  -0.0097

Sample sizes
                     Control Treated
All                  1945.      1948
Matched (ESS)         914.65    1945
Matched (Unweighted) 1916.      1945
Unmatched              29.         3</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for TEX :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0036
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary  -0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0058
Home_SP_WAR             Contin.  -0.0184

Sample sizes
                     Control Treated
All                  2168.      2169
Matched (ESS)         894.02    2158
Matched (Unweighted) 2153.      2158
Unmatched              15.        11</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for ATL :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0206
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary  -0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary  -0.0000
Away_SP_WAR             Contin.   0.0003
Home_SP_WAR             Contin.   0.0304

Sample sizes
                     Control Treated
All                  2179.      2181
Matched (ESS)         902.69    2171
Matched (Unweighted) 2156.      2171
Unmatched              23.        10</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for BAL :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0727
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0910
Home_SP_WAR             Contin.  -0.0069

Sample sizes
                     Control Treated
All                  2183.      2173
Matched (ESS)         942.97    2167
Matched (Unweighted) 2178.      2167
Unmatched               5.         6</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for CHA :
Balance Measures
                           Type Diff.Adj
distance               Distance  -0.0127
Opp_Win_P_Cat_Bad        Binary  -0.0000
Opp_Win_P_Cat_Good       Binary  -0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary  -0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary  -0.0000
Dow_Sat                  Binary  -0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0653
Home_SP_WAR             Contin.   0.0467

Sample sizes
                     Control Treated
All                   2170.     2164
Matched (ESS)         1122.7    2152
Matched (Unweighted)  2166.     2152
Unmatched                4.       12</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for MIN :
Balance Measures
                           Type Diff.Adj
distance               Distance  -0.0024
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0020
Home_SP_WAR             Contin.   0.0115

Sample sizes
                     Control Treated
All                  2171.      2172
Matched (ESS)        1077.93    2161
Matched (Unweighted) 2161.      2161
Unmatched              10.        11</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for TOR :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0094
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary  -0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary  -0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary  -0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0044
Home_SP_WAR             Contin.   0.0322

Sample sizes
                     Control Treated
All                  2171.      2173
Matched (ESS)         800.65    2169
Matched (Unweighted) 2148.      2169
Unmatched              23.         4</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for CHN :
Balance Measures
                           Type Diff.Adj
distance               Distance  -0.0017
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary  -0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary  -0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary  -0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary  -0.0000
Away_SP_WAR             Contin.  -0.0272
Home_SP_WAR             Contin.  -0.0360

Sample sizes
                     Control Treated
All                  2182.      2185
Matched (ESS)         333.32    2146
Matched (Unweighted) 2056.      2146
Unmatched             126.        39</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-26.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for COL :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0290
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0330
Home_SP_WAR             Contin.  -0.0172

Sample sizes
                     Control Treated
All                  2182.      2182
Matched (ESS)        1016.76    2176
Matched (Unweighted) 2174.      2176
Unmatched               8.         6</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-27.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for LAN :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0071
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary  -0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0037
Home_SP_WAR             Contin.   0.0082

Sample sizes
                     Control Treated
All                  2178.      2182
Matched (ESS)         830.22    2174
Matched (Unweighted) 2146.      2174
Unmatched              32.         8</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-28.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for NYN :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0027
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary  -0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary  -0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary  -0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0382
Home_SP_WAR             Contin.   0.0301

Sample sizes
                     Control Treated
All                  2181.      2179
Matched (ESS)        1045.81    2170
Matched (Unweighted) 2174.      2170
Unmatched               7.         9</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-29.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for PIT :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0542
Opp_Win_P_Cat_Bad        Binary  -0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary  -0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0795
Home_SP_WAR             Contin.   0.0029

Sample sizes
                     Control Treated
All                  2196.      2191
Matched (ESS)         878.17    2184
Matched (Unweighted) 2188.      2184
Unmatched               8.         7</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-3-30.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine all team-specific results into a single data frame</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>final_results <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(all_results)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the combined results</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(final_results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Estimate Std. Error    z Pr(&gt;|z|)    S   CI low CI high
  0.05298     0.0199 2.66  0.00787  7.0  0.01391  0.0921
  0.07909     0.0187 4.22  &lt; 0.001 15.3  0.04239  0.1158
  0.01930     0.0190 1.02  0.30874  1.7 -0.01787  0.0565
  0.04884     0.0177 2.76  0.00574  7.4  0.01419  0.0835
  0.09061     0.0231 3.93  &lt; 0.001 13.5  0.04543  0.1358
  0.08142     0.0183 4.45  &lt; 0.001 16.8  0.04555  0.1173
  0.00868     0.0189 0.46  0.64549  0.6 -0.02829  0.0456
  0.05757     0.0208 2.77  0.00560  7.5  0.01684  0.0983
  0.09724     0.0193 5.03  &lt; 0.001 21.0  0.05935  0.1351
  0.09491     0.0183 5.20  &lt; 0.001 22.2  0.05911  0.1307
  0.07844     0.0196 4.00  &lt; 0.001 14.0  0.04005  0.1168
  0.07891     0.0186 4.25  &lt; 0.001 15.5  0.04248  0.1153
  0.06507     0.0190 3.43  &lt; 0.001 10.7  0.02791  0.1022
  0.05142     0.0200 2.58  0.00996  6.6  0.01231  0.0905
  0.09220     0.0202 4.57  &lt; 0.001 17.7  0.05269  0.1317
  0.10359     0.0221 4.69  &lt; 0.001 18.5  0.06032  0.1469
  0.09709     0.0184 5.27  &lt; 0.001 22.8  0.06098  0.1332
  0.03413     0.0180 1.90  0.05764  4.1 -0.00111  0.0694
  0.08401     0.0193 4.34  &lt; 0.001 16.1  0.04610  0.1219
  0.09578     0.0196 4.88  &lt; 0.001 19.8  0.05731  0.1343
  0.08121     0.0195 4.16  &lt; 0.001 14.9  0.04296  0.1195
  0.04292     0.0186 2.30  0.02133  5.6  0.00638  0.0795
  0.07996     0.0174 4.61  &lt; 0.001 17.9  0.04596  0.1140
  0.07158     0.0182 3.94  &lt; 0.001 13.6  0.03597  0.1072
  0.08344     0.0201 4.15  &lt; 0.001 14.9  0.04405  0.1228
  0.06546     0.0281 2.33  0.01979  5.7  0.01040  0.1205
  0.14414     0.0194 7.43  &lt; 0.001 43.1  0.10613  0.1821
  0.11234     0.0202 5.55  &lt; 0.001 25.1  0.07268  0.1520
  0.07505     0.0186 4.04  &lt; 0.001 14.2  0.03863  0.1115
  0.05807     0.0190 3.06  0.00224  8.8  0.02084  0.0953

Term: Home
Comparison: mean(1) - mean(0)
Columns: term, contrast, estimate, std.error, statistic, p.value, s.value, conf.low, conf.high, predicted_lo, predicted_hi, predicted, Team </code></pre>
</div>
</div>
</section>
<section id="add-the-team-name-to-each-row" class="level1">
<h1>add the team name to each row</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>team_names <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ANA"</span>, <span class="st">"DET"</span>, <span class="st">"KCA"</span>, <span class="st">"PHI"</span>, <span class="st">"WAS"</span>, </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BOS"</span>, <span class="st">"CIN"</span>, <span class="st">"SDN"</span>, <span class="st">"SFN"</span>, <span class="st">"SLN"</span>, </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CLE"</span>, <span class="st">"HOU"</span>, <span class="st">"MIA"</span>, <span class="st">"MIL"</span>, <span class="st">"ARI"</span>, </span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"NYA"</span>, <span class="st">"OAK"</span>, <span class="st">"SEA"</span>, <span class="st">"TBA"</span>, <span class="st">"TEX"</span>, </span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ATL"</span>, <span class="st">"BAL"</span>, <span class="st">"CHA"</span>, <span class="st">"MIN"</span>, <span class="st">"TOR"</span>, </span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CHN"</span>, <span class="st">"COL"</span>, <span class="st">"LAN"</span>, <span class="st">"NYN"</span>, <span class="st">"PIT"</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>final_results<span class="sc">$</span>Team <span class="ot">&lt;-</span> team_names</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>ATT_results <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(final_results) <span class="sc">%&gt;%</span> </span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Team, estimate, std.error, statistic, conf.low, conf.high, s.value, predicted_lo, predicted_hi, predicted) <span class="sc">%&gt;%</span> </span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CI_Crosses_Zero =</span> <span class="fu">if_else</span>(conf.low <span class="sc">&lt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> conf.high <span class="sc">&gt;=</span> <span class="dv">0</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>ATT_results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Team    estimate  std.error statistic     conf.low  conf.high    s.value
1   ANA 0.052981560 0.01993526 2.6576804  0.013909160 0.09205396  6.9897786
2   DET 0.079086883 0.01872472 4.2236618  0.042387107 0.11578666 15.3444158
3   KCA 0.019302765 0.01896375 1.0178770 -0.017865504 0.05647103  1.6955524
4   PHI 0.048838781 0.01767978 2.7624088  0.014187049 0.08349051  7.4453223
5   WAS 0.090613506 0.02305273 3.9307056  0.045430980 0.13579603 13.5273307
6   BOS 0.081420262 0.01830237 4.4486177  0.045548269 0.11729225 16.8201251
7   CIN 0.008676082 0.01885932 0.4600422 -0.028287501 0.04563967  0.6315425
8   SDN 0.057574638 0.02078402 2.7701402  0.016838716 0.09831056  7.4795290
9   SFN 0.097243357 0.01933366 5.0297429  0.059350072 0.13513664 20.9573681
10  SLN 0.094907322 0.01826183 5.1970316  0.059114788 0.13069986 22.2356039
11  CLE 0.078444240 0.01958902 4.0045012  0.040050474 0.11683801 13.9739215
12  HOU 0.078914178 0.01858807 4.2454200  0.042482224 0.11534613 15.4840927
13  MIA 0.065066387 0.01895629 3.4324425  0.027912735 0.10222004 10.7071552
14  MIL 0.051416965 0.01995181 2.5770579  0.012312140 0.09052179  6.6489832
15  ARI 0.092204944 0.02016141 4.5733373  0.052689300 0.13172059 17.6684848
16  NYA 0.103586857 0.02207464 4.6925737  0.060321365 0.14685235 18.4997357
17  OAK 0.097091606 0.01842452 5.2696958  0.060980214 0.13320300 22.8030111
18  SEA 0.034134108 0.01798037 1.8984099 -0.001106765 0.06937498  4.1167332
19  TBA 0.084011020 0.01934337 4.3431419  0.046098703 0.12192334 16.1194878
20  TEX 0.095784216 0.01963251 4.8788583  0.057305211 0.13426322 19.8379859
21  ATL 0.081212069 0.01951467 4.1615904  0.042964016 0.11946012 14.9495387
22  BAL 0.042924061 0.01864563 2.3020977  0.006379298 0.07946882  5.5509949
23  CHA 0.079963410 0.01735010 4.6088159  0.045957842 0.11396898 17.9137581
24  MIN 0.071580847 0.01816822 3.9398934  0.035971792 0.10718990 13.5825249
25  TOR 0.083440161 0.02009595 4.1520875  0.044052814 0.12282751 14.8895535
26  CHN 0.065462920 0.02809152 2.3303442  0.010404545 0.12052129  5.6592328
27  COL 0.144137424 0.01939395 7.4320833  0.106125988 0.18214886 43.0887975
28  LAN 0.112341627 0.02023534 5.5517527  0.072681081 0.15200217 25.0755429
29  NYN 0.075051650 0.01858148 4.0390572  0.038632623 0.11147068 14.1856190
30  PIT 0.058067404 0.01899497 3.0569888  0.020837950 0.09529686  8.8050405
   predicted_lo predicted_hi predicted CI_Crosses_Zero
1     0.5228228    0.4427929 0.4427929           FALSE
2     0.5470894    0.4418601 0.4418601           FALSE
3     0.3158554    0.4143961 0.4143961            TRUE
4     0.4897532    0.5084109 0.5084109           FALSE
5     0.3753060    0.3279123 0.3279123           FALSE
6     0.4826172    0.3592286 0.3592286           FALSE
7     0.5829542    0.5314925 0.5314925            TRUE
8     0.3770942    0.7725916 0.7725916           FALSE
9     0.5785570    0.7184349 0.7184349           FALSE
10    0.3151276    0.5809567 0.5809567           FALSE
11    0.4846015    0.6062388 0.6062388           FALSE
12    0.5207747    0.5750094 0.5750094           FALSE
13    0.4117214    0.5981923 0.5981923           FALSE
14    0.4616906    0.7117807 0.7117807           FALSE
15    0.3634196    0.5095942 0.5095942           FALSE
16    0.5345494    0.7418731 0.7418731           FALSE
17    0.6303503    0.3725691 0.3725691           FALSE
18    0.4817851    0.5860407 0.5860407            TRUE
19    0.4797913    0.5329545 0.5329545           FALSE
20    0.3969143    0.5205303 0.5205303           FALSE
21    0.5811888    0.4988740 0.4988740           FALSE
22    0.4023091    0.5693656 0.5693656           FALSE
23    0.5239817    0.6080307 0.6080307           FALSE
24    0.2834493    0.5598897 0.5598897           FALSE
25    0.5896757    0.4979856 0.4979856           FALSE
26    0.5293965    0.4220871 0.4220871           FALSE
27    0.5344193    0.5370372 0.5370372           FALSE
28    0.5636857    0.4191419 0.4191419           FALSE
29    0.4372275    0.3998775 0.3998775           FALSE
30    0.6287705    0.4261692 0.4261692           FALSE</code></pre>
</div>
</div>
</section>
<section id="for-loop-for-atc-with-all-results-stored" class="level1">
<h1>For loop for ATC with all results stored</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty list to store the results for each team</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>all_results <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over team abbreviations and their data files</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (abbr <span class="cf">in</span> <span class="fu">names</span>(team_files)) {</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read the data for the current team</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  team_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(team_files[[abbr]])</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove rows with missing values in covariates</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>  team_data <span class="ot">&lt;-</span> team_data <span class="sc">%&gt;%</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Opp_Win_P_Cat),</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Opp_Playoffs),</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Opp_WS),</span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Dow),</span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Day_Night), </span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Away_SP_WAR), </span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Home_SP_WAR)</span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Skip if the filtered dataset is too small</span></span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(team_data) <span class="sc">&lt;</span> <span class="dv">10</span>) { <span class="co"># Adjust the threshold as needed</span></span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Skipping team:"</span>, abbr, <span class="st">"- Not enough data after filtering</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">next</span></span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Matching Method for ATC</span></span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a>  match_out_full_ATC <span class="ot">&lt;-</span> <span class="fu">matchit</span>(</span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a>    Home <span class="sc">~</span> Opp_Win_P_Cat <span class="sc">+</span> Opp_Playoffs <span class="sc">+</span> Opp_WS <span class="sc">+</span> Dow <span class="sc">+</span> Day_Night <span class="sc">+</span> Away_SP_WAR <span class="sc">+</span> Home_SP_WAR,</span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> team_data,</span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"full"</span>,</span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">exact =</span> <span class="sc">~</span> Opp_Win_P_Cat <span class="sc">+</span> Opp_Playoffs <span class="sc">+</span> Opp_WS <span class="sc">+</span> Dow <span class="sc">+</span> Day_Night,</span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">distance =</span> <span class="st">"glm"</span>,</span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimand =</span> <span class="st">"ATC"</span></span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb52-36"><a href="#cb52-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-37"><a href="#cb52-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Print balance table (optional, for debugging/validation)</span></span>
<span id="cb52-38"><a href="#cb52-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Balance Table for"</span>, abbr, <span class="st">":</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb52-39"><a href="#cb52-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">bal.tab</span>(match_out_full_ATC))</span>
<span id="cb52-40"><a href="#cb52-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-41"><a href="#cb52-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Summary and plot (optional, for diagnostics)</span></span>
<span id="cb52-42"><a href="#cb52-42" aria-hidden="true" tabindex="-1"></a>  match_out_full_summ <span class="ot">&lt;-</span> <span class="fu">summary</span>(match_out_full_ATC, <span class="at">interactions =</span> <span class="cn">TRUE</span>)</span>
<span id="cb52-43"><a href="#cb52-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(match_out_full_summ)  <span class="co"># Plot diagnostic information</span></span>
<span id="cb52-44"><a href="#cb52-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-45"><a href="#cb52-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract matched data</span></span>
<span id="cb52-46"><a href="#cb52-46" aria-hidden="true" tabindex="-1"></a>  match_data_full_ACT <span class="ot">&lt;-</span> <span class="fu">match.data</span>(match_out_full_ATC)</span>
<span id="cb52-47"><a href="#cb52-47" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-48"><a href="#cb52-48" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Dynamically construct the dependent variable name</span></span>
<span id="cb52-49"><a href="#cb52-49" aria-hidden="true" tabindex="-1"></a>  dependent_var <span class="ot">&lt;-</span> <span class="fu">paste0</span>(abbr, <span class="st">"_win"</span>)</span>
<span id="cb52-50"><a href="#cb52-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-51"><a href="#cb52-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Construct the formula dynamically</span></span>
<span id="cb52-52"><a href="#cb52-52" aria-hidden="true" tabindex="-1"></a>  formula_str <span class="ot">&lt;-</span> <span class="fu">paste0</span>(dependent_var, <span class="st">" ~ Home * (Opp_Win_P_Cat + Opp_Playoffs + Opp_WS + Dow + Day_Night + Away_SP_WAR + Home_SP_WAR)"</span>)</span>
<span id="cb52-53"><a href="#cb52-53" aria-hidden="true" tabindex="-1"></a>  formula <span class="ot">&lt;-</span> <span class="fu">as.formula</span>(formula_str)</span>
<span id="cb52-54"><a href="#cb52-54" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-55"><a href="#cb52-55" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Regression model based on matched data</span></span>
<span id="cb52-56"><a href="#cb52-56" aria-hidden="true" tabindex="-1"></a>  mod2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(formula, <span class="at">data =</span> match_data_full_ACT, <span class="at">weights =</span> weights)</span>
<span id="cb52-57"><a href="#cb52-57" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-58"><a href="#cb52-58" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Estimating ATC from the model</span></span>
<span id="cb52-59"><a href="#cb52-59" aria-hidden="true" tabindex="-1"></a>  atc_results <span class="ot">&lt;-</span> <span class="fu">avg_comparisons</span>(</span>
<span id="cb52-60"><a href="#cb52-60" aria-hidden="true" tabindex="-1"></a>    mod2,</span>
<span id="cb52-61"><a href="#cb52-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">variables =</span> <span class="st">"Home"</span>,</span>
<span id="cb52-62"><a href="#cb52-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">vcov =</span> <span class="sc">~</span>subclass,</span>
<span id="cb52-63"><a href="#cb52-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">newdata =</span> <span class="fu">filter</span>(match_data_full, Home <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb52-64"><a href="#cb52-64" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb52-65"><a href="#cb52-65" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-66"><a href="#cb52-66" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add the team abbreviation to the results</span></span>
<span id="cb52-67"><a href="#cb52-67" aria-hidden="true" tabindex="-1"></a>  atc_results <span class="ot">&lt;-</span> atc_results <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Team =</span> abbr)</span>
<span id="cb52-68"><a href="#cb52-68" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb52-69"><a href="#cb52-69" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Store results in the list</span></span>
<span id="cb52-70"><a href="#cb52-70" aria-hidden="true" tabindex="-1"></a>  all_results[[abbr]] <span class="ot">&lt;-</span> atc_results</span>
<span id="cb52-71"><a href="#cb52-71" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for ANA :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0197
Opp_Win_P_Cat_Bad        Binary  -0.0000
Opp_Win_P_Cat_Good       Binary  -0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary  -0.0000
Dow_Mon                  Binary  -0.0000
Dow_Sat                  Binary  -0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary  -0.0000
Dow_Wed                  Binary  -0.0000
Day_Night_N              Binary  -0.0000
Away_SP_WAR             Contin.   0.0092
Home_SP_WAR             Contin.  -0.0621

Sample sizes
                     Control Treated
All                     2179 2184.  
Matched (ESS)           2156  867.85
Matched (Unweighted)    2156 2184.  
Unmatched                 23    0.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for DET :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0134
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary  -0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary  -0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0126
Home_SP_WAR             Contin.  -0.0274

Sample sizes
                     Control Treated
All                     2171 2176.  
Matched (ESS)           2169 1057.32
Matched (Unweighted)    2169 2160.  
Unmatched                  2   16.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for KCA :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0320
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0251
Home_SP_WAR             Contin.  -0.0309

Sample sizes
                     Control Treated
All                     2167 2165.  
Matched (ESS)           2162  934.14
Matched (Unweighted)    2162 2161.  
Unmatched                  5    4.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for PHI :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0044
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary  -0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary  -0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary  -0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0067
Home_SP_WAR             Contin.  -0.0124

Sample sizes
                     Control Treated
All                     2179 2186.  
Matched (ESS)           2167 1109.88
Matched (Unweighted)    2167 2185.  
Unmatched                 12    1.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for WAS :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0041
Opp_Win_P_Cat_Bad        Binary  -0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0112
Home_SP_WAR             Contin.  -0.0016

Sample sizes
                     Control Treated
All                     1378 1371.  
Matched (ESS)           1365  626.87
Matched (Unweighted)    1365 1353.  
Unmatched                 13   18.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for BOS :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0493
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0553
Home_SP_WAR             Contin.   0.0068

Sample sizes
                     Control Treated
All                     2168 2166.  
Matched (ESS)           2160 1015.22
Matched (Unweighted)    2160 2155.  
Unmatched                  8   11.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for CIN :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0690
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0285
Home_SP_WAR             Contin.  -0.0717

Sample sizes
                     Control Treated
All                     2198 2188.  
Matched (ESS)           2181  926.64
Matched (Unweighted)    2181 2181.  
Unmatched                 17    7.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for SDN :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0508
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary  -0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0094
Home_SP_WAR             Contin.  -0.0636

Sample sizes
                     Control Treated
All                     2184 2182.  
Matched (ESS)           2168  867.86
Matched (Unweighted)    2168 2177.  
Unmatched                 16    5.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for SFN :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0094
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary  -0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary  -0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0181
Home_SP_WAR             Contin.  -0.0237

Sample sizes
                     Control Treated
All                     2178 2185.  
Matched (ESS)           2168  864.56
Matched (Unweighted)    2168 2176.  
Unmatched                 10    9.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for SLN :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0023
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary  -0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0081
Home_SP_WAR             Contin.   0.0124

Sample sizes
                     Control Treated
All                     2198 2202.  
Matched (ESS)           2170 1257.03
Matched (Unweighted)    2170 2194.  
Unmatched                 28    8.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for CLE :
Balance Measures
                           Type Diff.Adj
distance               Distance  -0.0046
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary  -0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0275
Home_SP_WAR             Contin.  -0.0157

Sample sizes
                     Control Treated
All                     2170 2167.  
Matched (ESS)           2155  970.63
Matched (Unweighted)    2155 2156.  
Unmatched                 15   11.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for HOU :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0110
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary  -0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0460
Home_SP_WAR             Contin.  -0.0255

Sample sizes
                     Control Treated
All                     2198 2205.  
Matched (ESS)           2180 1028.93
Matched (Unweighted)    2180 2198.  
Unmatched                 18    7.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for MIA :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0003
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary  -0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0022
Home_SP_WAR             Contin.   0.0013

Sample sizes
                     Control Treated
All                     2190 2167.  
Matched (ESS)           2156  991.84
Matched (Unweighted)    2156 2163.  
Unmatched                 34    4.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for MIL :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0685
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0164
Home_SP_WAR             Contin.  -0.0795

Sample sizes
                     Control Treated
All                     2179 2185.  
Matched (ESS)           2168  835.75
Matched (Unweighted)    2168 2175.  
Unmatched                 11   10.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for ARI :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0310
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary  -0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0643
Home_SP_WAR             Contin.  -0.0052

Sample sizes
                     Control Treated
All                     1945 1948.  
Matched (ESS)           1917  739.99
Matched (Unweighted)    1917 1936.  
Unmatched                 28   12.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for NYA :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0126
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary  -0.0000
Opp_Win_P_Cat_Great      Binary  -0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary  -0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0026
Home_SP_WAR             Contin.   0.0286

Sample sizes
                     Control Treated
All                     2169 2166.  
Matched (ESS)           2164  703.83
Matched (Unweighted)    2164 2147.  
Unmatched                  5   19.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for OAK :
Balance Measures
                           Type Diff.Adj
distance               Distance  -0.0027
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0042
Home_SP_WAR             Contin.  -0.0114

Sample sizes
                     Control Treated
All                     2171 2170.  
Matched (ESS)           2162  905.07
Matched (Unweighted)    2162 2165.  
Unmatched                  9    5.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for SEA :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0003
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary  -0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary  -0.0000
Away_SP_WAR             Contin.   0.0020
Home_SP_WAR             Contin.   0.0073

Sample sizes
                     Control Treated
All                     2165 2181.  
Matched (ESS)           2160 1153.72
Matched (Unweighted)    2160 2169.  
Unmatched                  5   12.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for TBA :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0367
Opp_Win_P_Cat_Bad        Binary  -0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary  -0.0000
Opp_Playoffs             Binary  -0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary  -0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0080
Home_SP_WAR             Contin.  -0.0469

Sample sizes
                     Control Treated
All                     1945 1948.  
Matched (ESS)           1916  952.54
Matched (Unweighted)    1916 1945.  
Unmatched                 29    3.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for TEX :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0059
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0096
Home_SP_WAR             Contin.  -0.0295

Sample sizes
                     Control Treated
All                     2168 2169.  
Matched (ESS)           2153  928.24
Matched (Unweighted)    2153 2158.  
Unmatched                 15   11.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for ATL :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0248
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0084
Home_SP_WAR             Contin.   0.0324

Sample sizes
                     Control Treated
All                     2179 2181.  
Matched (ESS)           2156  840.55
Matched (Unweighted)    2156 2171.  
Unmatched                 23   10.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for BAL :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0704
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary  -0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0269
Home_SP_WAR             Contin.  -0.0769

Sample sizes
                     Control Treated
All                     2183 2173.  
Matched (ESS)           2178  992.15
Matched (Unweighted)    2178 2167.  
Unmatched                  5    6.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for CHA :
Balance Measures
                           Type Diff.Adj
distance               Distance  -0.0063
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary  -0.0000
Opp_WS                   Binary  -0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary  -0.0000
Dow_Sat                  Binary  -0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0034
Home_SP_WAR             Contin.  -0.0066

Sample sizes
                     Control Treated
All                     2170 2164.  
Matched (ESS)           2166 1077.07
Matched (Unweighted)    2166 2152.  
Unmatched                  4   12.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for MIN :
Balance Measures
                           Type Diff.Adj
distance               Distance  -0.0020
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0122
Home_SP_WAR             Contin.   0.0019

Sample sizes
                     Control Treated
All                     2171 2172.  
Matched (ESS)           2161 1026.17
Matched (Unweighted)    2161 2161.  
Unmatched                 10   11.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for TOR :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0147
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.  -0.0434
Home_SP_WAR             Contin.   0.0175

Sample sizes
                     Control Treated
All                     2171 2173.  
Matched (ESS)           2148  359.52
Matched (Unweighted)    2148 2169.  
Unmatched                 23    4.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for CHN :
Balance Measures
                           Type Diff.Adj
distance               Distance  -0.0002
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary  -0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary  -0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0440
Home_SP_WAR             Contin.   0.0420

Sample sizes
                     Control Treated
All                     2182 2185.  
Matched (ESS)           2056  260.91
Matched (Unweighted)    2056 2146.  
Unmatched                126   39.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-26.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for COL :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0404
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary  -0.0000
Away_SP_WAR             Contin.  -0.0075
Home_SP_WAR             Contin.  -0.0607

Sample sizes
                     Control Treated
All                     2182 2182.  
Matched (ESS)           2174  972.43
Matched (Unweighted)    2174 2176.  
Unmatched                  8    6.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-27.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for LAN :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0078
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0098
Home_SP_WAR             Contin.   0.0248

Sample sizes
                     Control Treated
All                     2178 2182.  
Matched (ESS)           2146  799.38
Matched (Unweighted)    2146 2174.  
Unmatched                 32    8.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-28.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for NYN :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0030
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0582
Home_SP_WAR             Contin.   0.0374

Sample sizes
                     Control Treated
All                     2181 2179.  
Matched (ESS)           2174 1014.05
Matched (Unweighted)    2174 2170.  
Unmatched                  7    9.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-29.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Balance Table for PIT :
Balance Measures
                           Type Diff.Adj
distance               Distance   0.0673
Opp_Win_P_Cat_Bad        Binary   0.0000
Opp_Win_P_Cat_Good       Binary   0.0000
Opp_Win_P_Cat_Great      Binary   0.0000
Opp_Win_P_Cat_Terrible   Binary   0.0000
Opp_Playoffs             Binary   0.0000
Opp_WS                   Binary   0.0000
Dow_Fri                  Binary   0.0000
Dow_Mon                  Binary   0.0000
Dow_Sat                  Binary   0.0000
Dow_Sun                  Binary   0.0000
Dow_Thu                  Binary   0.0000
Dow_Tue                  Binary   0.0000
Dow_Wed                  Binary   0.0000
Day_Night_N              Binary   0.0000
Away_SP_WAR             Contin.   0.0437
Home_SP_WAR             Contin.  -0.0672

Sample sizes
                     Control Treated
All                     2196 2191.  
Matched (ESS)           2188  857.35
Matched (Unweighted)    2188 2184.  
Unmatched                  8    7.  </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-5-30.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine all team-specific results into a single data frame</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>final_results2 <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(all_results)</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the combined results</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(final_results2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Estimate Std. Error    z Pr(&gt;|z|)    S    CI low CI high
   0.0752     0.0205 3.66  &lt; 0.001 12.0  3.49e-02  0.1154
   0.0889     0.0182 4.87  &lt; 0.001 19.8  5.32e-02  0.1247
   0.0700     0.0188 3.72  &lt; 0.001 12.3  3.31e-02  0.1070
   0.0804     0.0181 4.45  &lt; 0.001 16.8  4.50e-02  0.1159
   0.1072     0.0234 4.57  &lt; 0.001 17.7  6.12e-02  0.1531
   0.0585     0.0198 2.95  0.00317  8.3  1.97e-02  0.0974
   0.0695     0.0192 3.62  &lt; 0.001 11.8  3.19e-02  0.1071
   0.0944     0.0201 4.71  &lt; 0.001 18.6  5.51e-02  0.1338
   0.1065     0.0186 5.73  &lt; 0.001 26.6  7.01e-02  0.1429
   0.1043     0.0177 5.89  &lt; 0.001 27.9  6.95e-02  0.1390
   0.0799     0.0203 3.93  &lt; 0.001 13.5  4.01e-02  0.1198
   0.1025     0.0186 5.51  &lt; 0.001 24.7  6.60e-02  0.1389
   0.0845     0.0190 4.46  &lt; 0.001 16.9  4.73e-02  0.1217
   0.1043     0.0209 4.99  &lt; 0.001 20.6  6.33e-02  0.1453
   0.0902     0.0202 4.47  &lt; 0.001 16.9  5.06e-02  0.1298
   0.1123     0.0214 5.24  &lt; 0.001 22.6  7.03e-02  0.1543
   0.1034     0.0198 5.22  &lt; 0.001 22.4  6.45e-02  0.1422
   0.0836     0.0179 4.66  &lt; 0.001 18.3  4.84e-02  0.1187
   0.1301     0.0200 6.50  &lt; 0.001 33.6  9.09e-02  0.1693
   0.1142     0.0198 5.76  &lt; 0.001 26.8  7.53e-02  0.1530
   0.1075     0.0191 5.63  &lt; 0.001 25.7  7.01e-02  0.1450
   0.0830     0.0189 4.39  &lt; 0.001 16.5  4.60e-02  0.1200
   0.0612     0.0187 3.27  0.00108  9.8  2.45e-02  0.0979
   0.1028     0.0204 5.04  &lt; 0.001 21.0  6.28e-02  0.1428
   0.1427     0.0250 5.70  &lt; 0.001 26.3  9.36e-02  0.1917
   0.0715     0.0365 1.96  0.05026  4.3 -8.24e-05  0.1431
   0.1736     0.0191 9.10  &lt; 0.001 63.3  1.36e-01  0.2110
   0.1153     0.0218 5.30  &lt; 0.001 23.0  7.27e-02  0.1580
   0.0852     0.0191 4.47  &lt; 0.001 17.0  4.79e-02  0.1226
   0.1266     0.0192 6.58  &lt; 0.001 34.3  8.89e-02  0.1643

Term: Home
Comparison: mean(1) - mean(0)
Columns: term, contrast, estimate, std.error, statistic, p.value, s.value, conf.low, conf.high, predicted_lo, predicted_hi, predicted, Team </code></pre>
</div>
</div>
</section>
<section id="add-the-team-name-to-each-row-1" class="level1">
<h1>add the team name to each row</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>team_names <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ANA"</span>, <span class="st">"DET"</span>, <span class="st">"KCA"</span>, <span class="st">"PHI"</span>, <span class="st">"WAS"</span>, </span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BOS"</span>, <span class="st">"CIN"</span>, <span class="st">"SDN"</span>, <span class="st">"SFN"</span>, <span class="st">"SLN"</span>, </span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CLE"</span>, <span class="st">"HOU"</span>, <span class="st">"MIA"</span>, <span class="st">"MIL"</span>, <span class="st">"ARI"</span>, </span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"NYA"</span>, <span class="st">"OAK"</span>, <span class="st">"SEA"</span>, <span class="st">"TBA"</span>, <span class="st">"TEX"</span>, </span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ATL"</span>, <span class="st">"BAL"</span>, <span class="st">"CHA"</span>, <span class="st">"MIN"</span>, <span class="st">"TOR"</span>, </span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CHN"</span>, <span class="st">"COL"</span>, <span class="st">"LAN"</span>, <span class="st">"NYN"</span>, <span class="st">"PIT"</span></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a>final_results2<span class="sc">$</span>Team <span class="ot">&lt;-</span> team_names</span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a>ATC_results <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(final_results2) <span class="sc">%&gt;%</span> </span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Team, estimate, std.error, statistic, conf.low, conf.high, s.value, predicted_lo, predicted_hi, predicted) <span class="sc">%&gt;%</span> </span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CI_Crosses_Zero =</span> <span class="fu">if_else</span>(conf.low <span class="sc">&lt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> conf.high <span class="sc">&gt;=</span> <span class="dv">0</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a>ATC_results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Team   estimate  std.error statistic      conf.low  conf.high   s.value
1   ANA 0.07516771 0.02053276  3.660867  3.492424e-02 0.11541119 11.957940
2   DET 0.08892240 0.01824322  4.874271  5.316635e-02 0.12467845 19.804454
3   KCA 0.07004567 0.01883808  3.718303  3.312372e-02 0.10696762 12.283637
4   PHI 0.08043253 0.01809241  4.445650  4.497205e-02 0.11589300 16.800201
5   WAS 0.10719453 0.02344166  4.572821  6.124972e-02 0.15313934 17.664931
6   BOS 0.05854639 0.01984267  2.950529  1.965546e-02 0.09743731  8.300256
7   CIN 0.06950683 0.01917777  3.624344  3.191910e-02 0.10709456 11.753175
8   SDN 0.09444353 0.02006427  4.707050  5.511828e-02 0.13376878 18.601998
9   SFN 0.10647186 0.01857224  5.732849  7.007093e-02 0.14287279 26.593458
10  SLN 0.10425632 0.01770818  5.887468  6.954894e-02 0.13896371 27.925923
11  CLE 0.07993335 0.02032110  3.933514  4.010472e-02 0.11976197 13.544191
12  HOU 0.10246184 0.01859287  5.510815  6.602049e-02 0.13890319 24.738787
13  MIA 0.08448927 0.01896500  4.455011  4.731855e-02 0.12165998 16.863087
14  MIL 0.10433762 0.02091958  4.987558  6.333599e-02 0.14533924 20.641208
15  ARI 0.09018946 0.02019114  4.466783  5.061555e-02 0.12976337 16.942349
16  NYA 0.11229119 0.02144005  5.237451  7.026947e-02 0.15431291 22.550312
17  OAK 0.10335814 0.01980381  5.219104  6.454339e-02 0.14217290 22.407181
18  SEA 0.08355606 0.01793935  4.657698  4.839559e-02 0.11871654 18.254555
19  TBA 0.13006623 0.01999486  6.504983  9.087702e-02 0.16925544 33.583253
20  TEX 0.11415062 0.01981641  5.760408  7.531117e-02 0.15299008 26.828498
21  ATL 0.10751470 0.01910740  5.626863  7.006489e-02 0.14496451 25.699515
22  BAL 0.08300978 0.01889501  4.393212  4.597624e-02 0.12004332 16.450163
23  CHA 0.06119702 0.01872773  3.267722  2.449134e-02 0.09790269  9.849195
24  MIN 0.10281132 0.02040826  5.037731  6.281187e-02 0.14281077 21.017517
25  TOR 0.14267056 0.02501565  5.703253  9.364079e-02 0.19170032 26.342241
26  CHN 0.07151089 0.03652784  1.957709 -8.236024e-05 0.14310415  4.314327
27  COL 0.17361804 0.01907621  9.101287  1.362294e-01 0.21100672 63.280425
28  LAN 0.11532801 0.02176539  5.298689  7.266863e-02 0.15798739 23.031466
29  NYN 0.08522153 0.01906679  4.469631  4.785130e-02 0.12259176 16.961547
30  PIT 0.12662234 0.01923445  6.583103  8.892352e-02 0.16432116 34.337291
   predicted_lo predicted_hi predicted CI_Crosses_Zero
1     0.5425629    0.4852225 0.5425629           FALSE
2     0.4521223    0.3801080 0.4521223           FALSE
3     0.5124874    0.4126601 0.5124874           FALSE
4     0.5541473    0.3639678 0.5541473           FALSE
5     0.5307179    0.4894815 0.5307179           FALSE
6     0.4838552    0.4403954 0.4838552           FALSE
7     0.5192559    0.4893673 0.5192559           FALSE
8     0.5296232    0.4809397 0.5296232           FALSE
9     0.5016703    0.3659048 0.5016703           FALSE
10    0.5144878    0.4525182 0.5144878           FALSE
11    0.5362861    0.4924693 0.5362861           FALSE
12    0.4832537    0.3606214 0.4832537           FALSE
13    0.4528565    0.3785743 0.4528565           FALSE
14    0.5197942    0.3413153 0.5197942           FALSE
15    0.4888874    0.4439683 0.4888874           FALSE
16    0.5642908    0.5194639 0.5642908           FALSE
17    0.4866967    0.4367804 0.4866967           FALSE
18    0.4509805    0.5328129 0.4509805           FALSE
19    0.5501150    0.3620892 0.5501150           FALSE
20    0.4729847    0.4822328 0.4729847           FALSE
21    0.5351785    0.5632969 0.5351785           FALSE
22    0.4963321    0.4188823 0.4963321           FALSE
23    0.5269484    0.3802585 0.5269484           FALSE
24    0.5166780    0.4338511 0.5166780           FALSE
25    0.4932449    0.4915225 0.4932449           FALSE
26    0.5062277    0.4679543 0.5062277            TRUE
27    0.4466940    0.3714861 0.4466940           FALSE
28    0.6273948    0.4514218 0.6273948           FALSE
29    0.6318177    0.4748674 0.6318177           FALSE
30    0.3858664    0.2966249 0.3858664           FALSE</code></pre>
</div>
</div>
</section>
<section id="for-loop-for-ate-with-all-results-stored" class="level1">
<h1>For loop for ATE with all results stored</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty list to store the results for each team</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>all_results <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over team abbreviations and their data files</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (abbr <span class="cf">in</span> <span class="fu">names</span>(team_files)) {</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read the data for the current team</span></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>  team_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(team_files[[abbr]])</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove rows with missing values in covariates</span></span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>  team_data <span class="ot">&lt;-</span> team_data <span class="sc">%&gt;%</span></span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Opp_Win_P_Cat),</span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Opp_Playoffs),</span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Opp_WS),</span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Dow),</span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Day_Night), </span>
<span id="cb87-17"><a href="#cb87-17" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Away_SP_WAR), </span>
<span id="cb87-18"><a href="#cb87-18" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(Home_SP_WAR)</span>
<span id="cb87-19"><a href="#cb87-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb87-20"><a href="#cb87-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-21"><a href="#cb87-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Skip if the filtered dataset is too small</span></span>
<span id="cb87-22"><a href="#cb87-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(team_data) <span class="sc">&lt;</span> <span class="dv">10</span>) { <span class="co"># Adjust the threshold as needed</span></span>
<span id="cb87-23"><a href="#cb87-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Skipping team:"</span>, abbr, <span class="st">"- Not enough data after filtering</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb87-24"><a href="#cb87-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">next</span></span>
<span id="cb87-25"><a href="#cb87-25" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb87-26"><a href="#cb87-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-27"><a href="#cb87-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Matching Method for ATC</span></span>
<span id="cb87-28"><a href="#cb87-28" aria-hidden="true" tabindex="-1"></a>  match_out_full_ATE <span class="ot">&lt;-</span> <span class="fu">matchit</span>(</span>
<span id="cb87-29"><a href="#cb87-29" aria-hidden="true" tabindex="-1"></a>    Home <span class="sc">~</span> Opp_Win_P_Cat <span class="sc">+</span> Opp_Playoffs <span class="sc">+</span> Opp_WS <span class="sc">+</span> Dow <span class="sc">+</span> Day_Night <span class="sc">+</span> Away_SP_WAR <span class="sc">+</span> Home_SP_WAR,</span>
<span id="cb87-30"><a href="#cb87-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> team_data,</span>
<span id="cb87-31"><a href="#cb87-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"full"</span>,</span>
<span id="cb87-32"><a href="#cb87-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">exact =</span> <span class="sc">~</span> Opp_Win_P_Cat <span class="sc">+</span> Opp_Playoffs <span class="sc">+</span> Opp_WS <span class="sc">+</span> Dow <span class="sc">+</span> Day_Night,</span>
<span id="cb87-33"><a href="#cb87-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">distance =</span> <span class="st">"glm"</span>,</span>
<span id="cb87-34"><a href="#cb87-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimand =</span> <span class="st">"ATE"</span></span>
<span id="cb87-35"><a href="#cb87-35" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb87-36"><a href="#cb87-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-37"><a href="#cb87-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Print balance table (optional, for debugging/validation)</span></span>
<span id="cb87-38"><a href="#cb87-38" aria-hidden="true" tabindex="-1"></a>  <span class="co">#cat("\nBalance Table for", abbr, ":\n")</span></span>
<span id="cb87-39"><a href="#cb87-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># print(bal.tab(match_out_full_ATC))</span></span>
<span id="cb87-40"><a href="#cb87-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-41"><a href="#cb87-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Summary and plot (optional, for diagnostics)</span></span>
<span id="cb87-42"><a href="#cb87-42" aria-hidden="true" tabindex="-1"></a>  <span class="co">#match_out_full_summ &lt;- summary(match_out_full_ATE, interactions = TRUE)</span></span>
<span id="cb87-43"><a href="#cb87-43" aria-hidden="true" tabindex="-1"></a>  <span class="co">#plot(match_out_full_summ)  # Plot diagnostic information</span></span>
<span id="cb87-44"><a href="#cb87-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-45"><a href="#cb87-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract matched data</span></span>
<span id="cb87-46"><a href="#cb87-46" aria-hidden="true" tabindex="-1"></a>  match_data_full_ATE <span class="ot">&lt;-</span> <span class="fu">match.data</span>(match_out_full_ATE)</span>
<span id="cb87-47"><a href="#cb87-47" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-48"><a href="#cb87-48" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Dynamically construct the dependent variable name</span></span>
<span id="cb87-49"><a href="#cb87-49" aria-hidden="true" tabindex="-1"></a>  dependent_var <span class="ot">&lt;-</span> <span class="fu">paste0</span>(abbr, <span class="st">"_win"</span>)</span>
<span id="cb87-50"><a href="#cb87-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-51"><a href="#cb87-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Construct the formula dynamically</span></span>
<span id="cb87-52"><a href="#cb87-52" aria-hidden="true" tabindex="-1"></a>  formula_str <span class="ot">&lt;-</span> <span class="fu">paste0</span>(dependent_var, <span class="st">" ~ Home * (Opp_Win_P_Cat + Opp_Playoffs + Opp_WS + Dow + Day_Night + Away_SP_WAR + Home_SP_WAR)"</span>)</span>
<span id="cb87-53"><a href="#cb87-53" aria-hidden="true" tabindex="-1"></a>  formula <span class="ot">&lt;-</span> <span class="fu">as.formula</span>(formula_str)</span>
<span id="cb87-54"><a href="#cb87-54" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-55"><a href="#cb87-55" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Regression model based on matched data</span></span>
<span id="cb87-56"><a href="#cb87-56" aria-hidden="true" tabindex="-1"></a>  mod2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(formula, <span class="at">data =</span> match_data_full_ATE, <span class="at">weights =</span> weights)</span>
<span id="cb87-57"><a href="#cb87-57" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-58"><a href="#cb87-58" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Estimating ATC from the model</span></span>
<span id="cb87-59"><a href="#cb87-59" aria-hidden="true" tabindex="-1"></a>  ate_results <span class="ot">&lt;-</span> <span class="fu">avg_comparisons</span>(</span>
<span id="cb87-60"><a href="#cb87-60" aria-hidden="true" tabindex="-1"></a>    mod2,</span>
<span id="cb87-61"><a href="#cb87-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">variables =</span> <span class="st">"Home"</span>,</span>
<span id="cb87-62"><a href="#cb87-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">vcov =</span> <span class="sc">~</span>subclass</span>
<span id="cb87-63"><a href="#cb87-63" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb87-64"><a href="#cb87-64" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-65"><a href="#cb87-65" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add the team abbreviation to the results</span></span>
<span id="cb87-66"><a href="#cb87-66" aria-hidden="true" tabindex="-1"></a>  ate_results <span class="ot">&lt;-</span> ate_results <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Team =</span> abbr)</span>
<span id="cb87-67"><a href="#cb87-67" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-68"><a href="#cb87-68" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Store results in the list</span></span>
<span id="cb87-69"><a href="#cb87-69" aria-hidden="true" tabindex="-1"></a>  all_results[[abbr]] <span class="ot">&lt;-</span> ate_results</span>
<span id="cb87-70"><a href="#cb87-70" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb87-71"><a href="#cb87-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-72"><a href="#cb87-72" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine all team-specific results into a single data frame</span></span>
<span id="cb87-73"><a href="#cb87-73" aria-hidden="true" tabindex="-1"></a>final_results3 <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(all_results)</span>
<span id="cb87-74"><a href="#cb87-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-75"><a href="#cb87-75" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the combined results</span></span>
<span id="cb87-76"><a href="#cb87-76" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(final_results3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Estimate Std. Error    z Pr(&gt;|z|)    S   CI low CI high
   0.0567     0.0175 3.23  0.00124  9.7  0.02227  0.0910
   0.0757     0.0167 4.52  &lt; 0.001 17.3  0.04288  0.1085
   0.0463     0.0171 2.70  0.00694  7.2  0.01268  0.0798
   0.0556     0.0162 3.43  &lt; 0.001 10.7  0.02380  0.0873
   0.0797     0.0211 3.77  &lt; 0.001 12.6  0.03823  0.1211
   0.0541     0.0168 3.22  0.00126  9.6  0.02123  0.0870
   0.0359     0.0170 2.11  0.03448  4.9  0.00262  0.0691
   0.0804     0.0180 4.46  &lt; 0.001 16.9  0.04511  0.1158
   0.0899     0.0170 5.30  &lt; 0.001 23.0  0.05666  0.1232
   0.0885     0.0163 5.44  &lt; 0.001 24.1  0.05661  0.1204
   0.0617     0.0175 3.53  &lt; 0.001 11.2  0.02742  0.0960
   0.0686     0.0165 4.17  &lt; 0.001 15.0  0.03632  0.1008
   0.0718     0.0171 4.20  &lt; 0.001 15.2  0.03832  0.1053
   0.0826     0.0179 4.63  &lt; 0.001 18.0  0.04761  0.1176
   0.0654     0.0184 3.55  &lt; 0.001 11.4  0.02930  0.1014
   0.0726     0.0188 3.85  &lt; 0.001 13.1  0.03569  0.1096
   0.0786     0.0168 4.67  &lt; 0.001 18.4  0.04561  0.1116
   0.0481     0.0163 2.95  0.00314  8.3  0.01619  0.0801
   0.0954     0.0178 5.34  &lt; 0.001 23.4  0.06039  0.1303
   0.0967     0.0173 5.57  &lt; 0.001 25.3  0.06270  0.1307
   0.0741     0.0171 4.35  &lt; 0.001 16.1  0.04070  0.1076
   0.0616     0.0168 3.67  &lt; 0.001 12.0  0.02876  0.0945
   0.0563     0.0163 3.46  &lt; 0.001 10.9  0.02442  0.0882
   0.0776     0.0169 4.58  &lt; 0.001 17.7  0.04442  0.1108
   0.0874     0.0193 4.53  &lt; 0.001 17.4  0.04957  0.1252
   0.0414     0.0238 1.73  0.08287  3.6 -0.00538  0.0881
   0.1520     0.0174 8.74  &lt; 0.001 58.5  0.11787  0.1861
   0.0797     0.0175 4.55  &lt; 0.001 17.5  0.04534  0.1140
   0.0671     0.0170 3.95  &lt; 0.001 13.7  0.03385  0.1004
   0.0906     0.0171 5.29  &lt; 0.001 23.0  0.05703  0.1241

Term: Home
Comparison: mean(1) - mean(0)
Columns: term, contrast, estimate, std.error, statistic, p.value, s.value, conf.low, conf.high, predicted_lo, predicted_hi, predicted, Team </code></pre>
</div>
</div>
</section>
<section id="add-the-team-name-to-each-row-2" class="level1">
<h1>add the team name to each row</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>team_names <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ANA"</span>, <span class="st">"DET"</span>, <span class="st">"KCA"</span>, <span class="st">"PHI"</span>, <span class="st">"WAS"</span>, </span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"BOS"</span>, <span class="st">"CIN"</span>, <span class="st">"SDN"</span>, <span class="st">"SFN"</span>, <span class="st">"SLN"</span>, </span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CLE"</span>, <span class="st">"HOU"</span>, <span class="st">"MIA"</span>, <span class="st">"MIL"</span>, <span class="st">"ARI"</span>, </span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"NYA"</span>, <span class="st">"OAK"</span>, <span class="st">"SEA"</span>, <span class="st">"TBA"</span>, <span class="st">"TEX"</span>, </span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ATL"</span>, <span class="st">"BAL"</span>, <span class="st">"CHA"</span>, <span class="st">"MIN"</span>, <span class="st">"TOR"</span>, </span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CHN"</span>, <span class="st">"COL"</span>, <span class="st">"LAN"</span>, <span class="st">"NYN"</span>, <span class="st">"PIT"</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>final_results3<span class="sc">$</span>Team <span class="ot">&lt;-</span> team_names</span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>ATE_results <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(final_results3) <span class="sc">%&gt;%</span> </span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Team, estimate, std.error, statistic, conf.low, conf.high, s.value, predicted_lo, predicted_hi, predicted) <span class="sc">%&gt;%</span> </span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CI_Crosses_Zero =</span> <span class="fu">if_else</span>(conf.low <span class="sc">&lt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> conf.high <span class="sc">&gt;=</span> <span class="dv">0</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a>ATE_results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Team   estimate  std.error statistic     conf.low  conf.high   s.value
1   ANA 0.05666042 0.01754562  3.229320  0.022271633 0.09104921  9.654454
2   DET 0.07566681 0.01673000  4.522820  0.042876601 0.10845701 17.322263
3   KCA 0.04626319 0.01713528  2.699879  0.012678657 0.07984773  7.171584
4   PHI 0.05555243 0.01619874  3.429429  0.023803487 0.08730138 10.691131
5   WAS 0.07965331 0.02113277  3.769184  0.038233840 0.12107278 12.575937
6   BOS 0.05412301 0.01678485  3.224516  0.021225313 0.08702071  9.630235
7   CIN 0.03587136 0.01696514  2.114415  0.002620286 0.06912243  4.858104
8   SDN 0.08044656 0.01802768  4.462391  0.045112953 0.11578017 16.912750
9   SFN 0.08994248 0.01698236  5.296228  0.056657656 0.12322730 23.012036
10  SLN 0.08852587 0.01628226  5.436952  0.056613223 0.12043851 24.137138
11  CLE 0.06172255 0.01750318  3.526362  0.027416951 0.09602815 11.212830
12  HOU 0.06857448 0.01645858  4.166487  0.036316243 0.10083271 14.980495
13  MIA 0.07182241 0.01709359  4.201715  0.038319585 0.10532524 15.204191
14  MIL 0.08259584 0.01785079  4.627013  0.047608936 0.11758275 18.040238
15  ARI 0.06536446 0.01840006  3.552405  0.029301012 0.10142791 11.355174
16  NYA 0.07263208 0.01884786  3.853599  0.035690965 0.10957320 13.068695
17  OAK 0.07858212 0.01682124  4.671601  0.045613097 0.11155115 18.352092
18  SEA 0.04812647 0.01629633  2.953208  0.016186243 0.08006670  8.312772
19  TBA 0.09536894 0.01784581  5.344051  0.060391786 0.13034609 23.391273
20  TEX 0.09669038 0.01734461  5.574664  0.062695565 0.13068519 25.265038
21  ATL 0.07413351 0.01705799  4.345971  0.040700476 0.10756655 16.138081
22  BAL 0.06164154 0.01677651  3.674276  0.028760176 0.09452290 12.033572
23  CHA 0.05632773 0.01627741  3.460486  0.024424603 0.08823086 10.856888
24  MIN 0.07761382 0.01693449  4.583180  0.044422823 0.11080481 17.736353
25  TOR 0.08740332 0.01930489  4.527522  0.049566431 0.12524021 17.354339
26  CHN 0.04135682 0.02384682  1.734270 -0.005382079 0.08809572  3.593003
27  COL 0.15196399 0.01739355  8.736802  0.117873263 0.18605472 58.532860
28  LAN 0.07967328 0.01751732  4.548258  0.045339973 0.11400660 17.496161
29  NYN 0.06714329 0.01698698  3.952632  0.033849417 0.10043717 13.659241
30  PIT 0.09055433 0.01710265  5.294754  0.057033751 0.12407491 23.000394
   predicted_lo predicted_hi predicted CI_Crosses_Zero
1     0.7976775    0.5320487 0.7976775           FALSE
2     0.4134618    0.4942943 0.4134618           FALSE
3     0.3683379    0.4183784 0.4183784           FALSE
4     0.4938579    0.3071210 0.4938579           FALSE
5     0.4163024    0.2969918 0.2969918           FALSE
6     0.4505360    0.3611634 0.3611634           FALSE
7     0.5817425    0.5215401 0.5215401           FALSE
8     0.3905339    0.6914292 0.6914292           FALSE
9     0.4201129    0.4755036 0.4201129           FALSE
10    0.3230511    0.5648418 0.5648418           FALSE
11    0.4310582    0.6290604 0.4310582           FALSE
12    0.5247990    0.5691969 0.5691969           FALSE
13    0.4292834    0.5794170 0.5794170           FALSE
14    0.5374966    0.3709829 0.5374966           FALSE
15    0.4936464    0.3484492 0.4936464           FALSE
16    0.5622740    0.7222500 0.7222500           FALSE
17    0.6225796    0.3848922 0.3848922           FALSE
18    0.4727896    0.6216346 0.6216346           FALSE
19    0.5239934    0.4972075 0.4972075           FALSE
20    0.4081643    0.5133016 0.5133016           FALSE
21    0.5399808    0.6021630 0.5399808           FALSE
22    0.5937831    0.5112200 0.5937831           FALSE
23    0.3647603    0.4203738 0.3647603           FALSE
24    0.6512529    0.7049564 0.6512529           FALSE
25    0.4024912    0.6900778 0.4024912           FALSE
26    0.5163397    0.4318397 0.4318397            TRUE
27    0.2405870    0.6691566 0.2405870           FALSE
28    0.5860531    0.3816092 0.3816092           FALSE
29    0.4837708    0.4713482 0.4837708           FALSE
30    0.4048397    0.3356431 0.4048397           FALSE</code></pre>
</div>
</div>
</section>
<section id="writing-.csv-files-for-all-information" class="level1">
<h1>Writing .csv files for all information</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(ATE_results, <span class="st">"ATE_results.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(ATT_results, <span class="st">"ATT_results.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(ATC_results, <span class="st">"ATC_results.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="example-att-plots" class="level1">
<h1>Example ATT plots</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ATT_results)<span class="sc">+</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> conf.low, <span class="at">xmax =</span> conf.high, , <span class="at">y =</span> Team, <span class="at">color =</span> CI_Crosses_Zero))<span class="sc">+</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>estimate, <span class="at">y=</span>Team))<span class="sc">+</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Estimate (ATT)"</span>, <span class="at">y =</span> <span class="st">"Team (Abv)"</span>, <span class="at">title =</span> <span class="st">"Team ATT Estimates with Confidence Intervals"</span>, <span class="at">color =</span> <span class="st">"Conf. Interval"</span>)<span class="sc">+</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">"D"</span>)<span class="sc">+</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ATT viz</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>MLB_wins2023<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">"Data/MLB_2023_Team_Records.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Team =</span> Abbreviation)</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>MLB_wins_ATT2023<span class="ot">&lt;-</span>ATT_results <span class="sc">%&gt;%</span> </span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(MLB_wins2023) <span class="sc">%&gt;%</span> </span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_wins =</span> Home.Wins <span class="sc">+</span> Away.Wins) <span class="sc">%&gt;%</span> </span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">home_wpct =</span> Home.Wins<span class="sc">/</span>(Home.Wins<span class="sc">+</span>Home.Losses)) <span class="sc">%&gt;%</span> </span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">away_wpct =</span> Away.Wins<span class="sc">/</span>(Away.Wins<span class="sc">+</span>Away.Losses)) <span class="sc">%&gt;%</span> </span>
<span id="cb93-11"><a href="#cb93-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ATT_home_wpct =</span> home_wpct <span class="sc">-</span> estimate) <span class="sc">%&gt;%</span>  </span>
<span id="cb93-12"><a href="#cb93-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Att_total_wins =</span> <span class="fu">round</span>((<span class="dv">81</span> <span class="sc">*</span> ATT_home_wpct) <span class="sc">+</span> Away.Wins))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(Team)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>MLB_wins_ATT2023 <span class="sc">%&gt;%</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(League <span class="sc">==</span> <span class="st">"AL"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Att_total_wins)) <span class="sc">%&gt;%</span>  <span class="co"># Arrange by ATT wins in descending order</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Team =</span> <span class="fu">factor</span>(Team, <span class="at">levels =</span> <span class="fu">rev</span>(<span class="fu">unique</span>(Team)))) <span class="sc">%&gt;%</span>  <span class="co"># Reorder factor levels</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> total_wins, <span class="at">y =</span> Team, <span class="at">fill =</span> <span class="st">"Actual Wins"</span>), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span> </span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> Att_total_wins, <span class="at">y =</span> Team, <span class="at">fill =</span> <span class="st">"Wins if All Games Untreated"</span>), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Win Category"</span>,</span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Wins if All Games Untreated"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">2</span>)[<span class="dv">1</span>], <span class="st">"Actual Wins"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">2</span>)[<span class="dv">2</span>])</span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb95-13"><a href="#cb95-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Total Wins vs. If All Games Untreated in 2023 for AL Teams"</span>,</span>
<span id="cb95-14"><a href="#cb95-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Wins"</span>,</span>
<span id="cb95-15"><a href="#cb95-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Team"</span></span>
<span id="cb95-16"><a href="#cb95-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb95-17"><a href="#cb95-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>MLB_wins_ATT2023 <span class="sc">%&gt;%</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(League <span class="sc">==</span> <span class="st">"NL"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Att_total_wins)) <span class="sc">%&gt;%</span>  <span class="co"># Arrange by ATT wins in descending order</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Team =</span> <span class="fu">factor</span>(Team, <span class="at">levels =</span> <span class="fu">rev</span>(<span class="fu">unique</span>(Team)))) <span class="sc">%&gt;%</span>  <span class="co"># Reorder factor levels</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> total_wins, <span class="at">y =</span> Team, <span class="at">fill =</span> <span class="st">"Actual Wins"</span>), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span> </span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> Att_total_wins, <span class="at">y =</span> Team, <span class="at">fill =</span> <span class="st">"Wins if All Games Untreated"</span>), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Win Category"</span>,</span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Wins if All Games Untreated"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">2</span>)[<span class="dv">1</span>], <span class="st">"Actual Wins"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">2</span>)[<span class="dv">2</span>])</span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Total Wins vs. If All Games Untreated in 2023 for NL Teams"</span>,</span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Wins"</span>,</span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Team"</span></span>
<span id="cb96-16"><a href="#cb96-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb96-17"><a href="#cb96-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-11-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="example-atc-plots" class="level1">
<h1>Example Atc plots</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ATC viz</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>MLB_wins2023<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">"Data/MLB_2023_Team_Records.csv"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Team =</span> Abbreviation)</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>MLB_wins_ATC2023<span class="ot">&lt;-</span>ATC_results <span class="sc">%&gt;%</span> </span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(MLB_wins2023) <span class="sc">%&gt;%</span> </span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_wins =</span> Home.Wins <span class="sc">+</span> Away.Wins) <span class="sc">%&gt;%</span> </span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">home_wpct =</span> Home.Wins<span class="sc">/</span>(Home.Wins<span class="sc">+</span>Home.Losses)) <span class="sc">%&gt;%</span> </span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">away_wpct =</span> Away.Wins<span class="sc">/</span>(Away.Wins<span class="sc">+</span>Away.Losses)) <span class="sc">%&gt;%</span> </span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ATC_away_wpct =</span> away_wpct <span class="sc">+</span> estimate) <span class="sc">%&gt;%</span> </span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Atc_total_wins =</span> <span class="fu">round</span>((<span class="dv">81</span> <span class="sc">*</span> ATC_away_wpct) <span class="sc">+</span> Home.Wins))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(Team)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>MLB_wins_ATC2023 <span class="sc">%&gt;%</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(League <span class="sc">==</span> <span class="st">"AL"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Atc_total_wins)) <span class="sc">%&gt;%</span>  <span class="co"># Arrange by ATT wins in descending order</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Team =</span> <span class="fu">factor</span>(Team, <span class="at">levels =</span> <span class="fu">rev</span>(<span class="fu">unique</span>(Team)))) <span class="sc">%&gt;%</span>  <span class="co"># Reorder factor levels</span></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span>  </span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> Atc_total_wins, <span class="at">y =</span> Team, <span class="at">fill =</span> <span class="st">"Wins if All Games Treated"</span>), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> total_wins, <span class="at">y =</span> Team, <span class="at">fill =</span> <span class="st">"Actual Wins"</span>), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span> </span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Win Category"</span>,</span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Wins if All Games Treated"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">2</span>)[<span class="dv">1</span>], <span class="st">"Actual Wins"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">2</span>)[<span class="dv">2</span>])</span>
<span id="cb99-11"><a href="#cb99-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb99-12"><a href="#cb99-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb99-13"><a href="#cb99-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Total Wins vs. If All Games Treated in 2023 for AL Teams"</span>,</span>
<span id="cb99-14"><a href="#cb99-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Wins"</span>,</span>
<span id="cb99-15"><a href="#cb99-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Team"</span></span>
<span id="cb99-16"><a href="#cb99-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb99-17"><a href="#cb99-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>MLB_wins_ATC2023 <span class="sc">%&gt;%</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(League <span class="sc">==</span> <span class="st">"NL"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Atc_total_wins)) <span class="sc">%&gt;%</span>  <span class="co"># Arrange by ATT wins in descending order</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Team =</span> <span class="fu">factor</span>(Team, <span class="at">levels =</span> <span class="fu">rev</span>(<span class="fu">unique</span>(Team)))) <span class="sc">%&gt;%</span>  <span class="co"># Reorder factor levels</span></span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span>  </span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> Atc_total_wins, <span class="at">y =</span> Team, <span class="at">fill =</span> <span class="st">"Wins if All Games Treated"</span>), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> total_wins, <span class="at">y =</span> Team, <span class="at">fill =</span> <span class="st">"Actual Wins"</span>), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span> </span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Win Category"</span>,</span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Wins if All Games Treated"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">2</span>)[<span class="dv">1</span>], <span class="st">"Actual Wins"</span> <span class="ot">=</span> <span class="fu">viridis</span>(<span class="dv">2</span>)[<span class="dv">2</span>])</span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Total Wins vs. If All Games Treated in 2023 for NL Teams"</span>,</span>
<span id="cb100-14"><a href="#cb100-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Wins"</span>,</span>
<span id="cb100-15"><a href="#cb100-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Team"</span></span>
<span id="cb100-16"><a href="#cb100-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb100-17"><a href="#cb100-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-12-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(ATC_results)<span class="sc">+</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_linerange</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> conf.low, <span class="at">xmax =</span> conf.high, , <span class="at">y =</span> Team, <span class="at">color =</span> CI_Crosses_Zero))<span class="sc">+</span></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x=</span>estimate, <span class="at">y=</span>Team))<span class="sc">+</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Estimate (ATT)"</span>, <span class="at">y =</span> <span class="st">"Team (Abv)"</span>, <span class="at">title =</span> <span class="st">"Team ATT Estimates with Confidence Intervals"</span>, <span class="at">color =</span> <span class="st">"Conf. Interval"</span>)<span class="sc">+</span></span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">"D"</span>)<span class="sc">+</span></span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>MLB_wins_ATC2023 <span class="sc">%&gt;%</span> </span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">difference =</span> total_wins <span class="sc">-</span> Atc_total_wins) <span class="sc">%&gt;%</span> </span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> difference, <span class="at">y =</span> Team, <span class="at">fill =</span> CI_Crosses_Zero))<span class="sc">+</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Estimate Fewer Wins in 2023 if All Games Treated"</span>, <span class="at">y =</span> <span class="st">"Team (Abv)"</span>, <span class="at">title =</span> <span class="st">"Team Estimated Wins if All Games Treated in 2023"</span>, <span class="at">fill =</span> <span class="st">"Conf. Interval Crosses 0"</span>)<span class="sc">+</span></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">13</span>)) <span class="sc">+</span></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">"D"</span>)<span class="sc">+</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Analysis_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>